(function(m){var l=window.AmazonUIPageJS||window.P,q=l._namespace||l.attributeErrors,r=q?q("VSECommonComponentAssets",""):l;r.guardFatal?r.guardFatal(m)(r,window):r.execute(function(){m(r,window)})})(function(m,l,q){(function(){function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=16*Math.random()|0;return("x"==b?c:c&3|8).toString(16)})}l.vseFeatures=l.vseFeatures||{};var y=l.gatedP||{register:function(b,c,a,e,f){void 0===f&&(f=l.vseFeatures);m.now(b).execute(b+
"-prereg",function(h){h||f[c]||(f[c]=!0,e.resolve(a(e)).then(function(){m.now(b).execute(b+"-reg",function(a){a||(m.log("Gated registration failed to register module!","ERROR",b),f[c]=!1)})}))})},declare:function(b,c,a,e){void 0===e&&(e=l.vseFeatures);m.now(b).execute(b+"-prereg",function(f){f||e[c]||(e[c]=!0,m.declare(b,a))})}},t={count:function(b,c){var a=l.ue;a&&a.count("vse:csm:"+b,c)},emitSushiMetric:function(b,c,a){var e=this;c=c||"https://unagi-na.amazon.com/1/events/com.amazon.eel.vse.metricstest.nexus";
a=a||0;if(!(3<=a)){var f=JSON.stringify(b).replace(/\\\\/g,""),h={params:f,paramsFormat:"json",contentType:"application/json; charset\x3dutf-8",error:function(){e.emitSushiMetric(b,c,++a)}},g=navigator.userAgent.match(/iPhone/i),l=!1;m.now("mash").execute("vse-detect-mshop",function(){l=!0});var k=null!==g&&l;m.when("A").execute("Emit-VSE-Metrics",function(b){navigator&&navigator.sendBeacon&&!k?navigator.sendBeacon(c,f):b.post(c,h)})}},logFatal:function(b,c,a){l.ueLogError&&l.ueLogError(a,{logLevel:"FATAL",
attribution:b,message:c})},logError:function(b,c,a){l.ueLogError&&l.ueLogError(a,{logLevel:"ERROR",attribution:b,message:c})}},H={makeApplicationSushiPayloadBuilder:function(b,c){return function(a){var e={eventSource:c.eventSource,requestId:c.requestId,sessionId:c.sessionId,placementContext:c.placementContext,marketplaceId:c.marketplaceId,weblabIds:c.weblabIds,clientId:c.clientId,isInternal:c.isInternal.toString(),isRobot:c.isRobot.toString(),pageAsin:c.pageAsin,customerId:c.customerId,sessionType:c.sessionType||
1,refMarkers:c.refMarkers,eventId:r(),timestamp:new Date,userAgentData:navigator.userAgent,titleSessionId:0,videoAsin:0,pageUrl:null!==l.location.href?l.location.href.substring(0,500):"",videoAsinList:c.videoAsinList||""};return{events:[{data:b.$.extend(e,a)}]}}}},I={fetchLatestPageState:function(b,c){b.state.replace(c,JSON.parse(b.$("script[type\x3d'a-state'][data-a-state*\x3d"+c+"]").html()));return b.state(c)},isDefined:function(b){return"undefined"!==typeof b&&null!==b}},k={updateReftagParam:function(b,
c){return k.updateQueryStringParameter(b,"ref_?","ref",c)},updateQueryStringParameter:function(b,c,a,e){c=new RegExp("([?\x26/])"+c+"\x3d.*?(\x26|$)","i");var f=-1!==b.indexOf("?")?"\x26":"?";return b.match(c)?b.replace(c,"$1"+a+"\x3d"+e+"$2"):b+f+a+"\x3d"+e},generateUUID:function(){for(var b="",c=0;13>c;c++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return b},logFatal:function(b,c){var a="VSE_SHARE_WITH_FRIENDS_JS_WIDGET";c&&(a=a+"_"+
c);m.log(b,"FATAL",a);return!0},decodeEntities:function(b){var c=document.createElement("textarea");c.innerHTML=b;return c.value},triggerShare:function(b,c,a,e){if(c){c=screen.width;var f=screen.height;a=a?a:.7*c;e=e?e:.7*f;l.open(b,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+a+",height\x3d"+e+",top\x3d"+(f/2-e/2)+",left\x3d"+(c/2-a/2))}else l.open(b,"_self")},getPageData:function(b){return"undefined"!==typeof b.pageLevelStateKey?A.state(b.pageLevelStateKey):b.pageLevelData},buildUrl:function(b,
a){a=a||{};for(var d=l.navigator&&l.navigator.userAgent&&l.navigator.userAgent.match(/iPhone/i),e=Object.keys(a),f=0<e.length&&("sms:"!==b||!d)?"?":"",d=0;d<e.length;d++)"?"!==f&&(f+="\x26"),a[e[d]]&&(f+=e[d]+"\x3d"+encodeURIComponent(a[e[d]]));return b+f},generateReftags:function(b,a){var d,e;b=k.getPageData(b);"undefined"!==typeof b&&(d=b.clientRef,e=b.deviceTypeRef);d=d?d:"un";e=e?e:"un";b=a?a:"un";a=k.generateUUID();b="cm_sw_"+b;d=d+"_"+e+"_"+a;return{returnReftag:b+"_r_"+d,clickReftag:b+"_c_"+
d}}},J={share:function(a,c){c={facebook:{shareEndpoint:"https://www.facebook.com/dialog/share",params:function(a){return{href:k.decodeEntities(a.url),display:"popup",quote:a.quote?k.decodeEntities(a.quote):"",app_id:"465632727431967"}},ref:"fb",height:450,width:700,isWebShare:!0},pinterest:{shareEndpoint:"https://www.pinterest.com/pin/create/button",params:function(a){return{url:k.decodeEntities(a.url),media:k.decodeEntities(a.image),description:k.decodeEntities(a.description)}},ref:"pi",height:620,
width:700,isWebShare:!0},twitter:{shareEndpoint:"https://twitter.com/intent/tweet",params:function(a){var b=k.decodeEntities(a.title);a=k.decodeEntities(a.url);if(b){var c=a?Math.min(a.length,20):-1;200<b.length+c+1&&(b=b.substring(0,200-(c+1+3))+"...")}return{text:b,url:a}},ref:"tw",height:470,width:670,isWebShare:!0},email:{shareEndpoint:"mailto:",params:function(a){return{subject:k.decodeEntities(a.title),body:k.decodeEntities(a.description)+"\n"+k.decodeEntities(a.url)}},ref:"em",height:470,width:670,
isWebShare:!1},sms:{shareEndpoint:"sms:",params:function(a){return{body:k.decodeEntities(a.title)+" "+k.decodeEntities(a.url)}},ref:"sm",height:470,width:670,isWebShare:!1},whatsapp:{shareEndpoint:"https://api.whatsapp.com/send",params:function(a){return{text:k.decodeEntities(a.description)+"\n"+k.decodeEntities(a.url)}},ref:"wa",height:470,width:670,isWebShare:!1}}[c];var d=k.generateReftags(a,c.ref);a.url=k.updateReftagParam(a.url,d.returnReftag);a=k.buildUrl(c.shareEndpoint,c.params(a));k.triggerShare(a,
c.isWebShare,c.width,c.height)}},v={sendRequest:function(a,c,d,e,f){a.ajax(c,{params:d,paramsFormat:"json",crossDomain:!0,method:"POST",withCredentials:!0,contentType:"application/json",success:e,error:f})}},K=function(){function a(b,d){void 0===d&&(d={refTagRecorderEndPoint:"/gp/mobile/tag/",retryLimit:3});this.A=b;this.config=d}a.prototype.emitRefTag=function(a,b){void 0===b&&(b=0);if(!(b>=this.config.retryLimit)){var e=this;this.A.post(this.config.refTagRecorderEndPoint+"ref\x3d"+a,{error:function(){e.emitRefTag(a,
++b)}})}};return a}(),h=function(){function a(){}a.POSITIVE_VOTE="positive";a.NEGATIVE_VOTE="negative";a.NONE_VOTE="none";a.EMPTY_STRING="";a.DEFAULT_MIN_GUTTER=24;a.DEFAULT_HEIGHT_ANIMATION_SPEED=200;a.ATTR_ANIMATING="animating";a.ATTR_CURRENT_GUTTER="currentGutter";a.ATTR_FIRST_ITEM_FLUSH_LEFT="first_item_flush_left";a.ATTR_FIRST_VISIBLE_ITEM="firstVisibleItem";a.ATTR_HEIGHT_ANIMATION_SPEED="height_animation_speed";a.ATTR_HIDE_OFFSCREEN="hide_off_screen";a.ATTR_MAX_HEIGHT="maxHeight";a.ATTR_MIN_GUTTER=
"minimum_gutter_width";a.ATTR_PAGE_NUMBER="pageNumber";a.ATTR_PAGE_SIZE="pageSize";a.ATTR_SET_SIZE="set_size";a.ATTR_SHOW_PARTIAL="show_partial_next";a.ATTR_SINGLE_PAGE_ALIGN="single_page_align";a.ATTR_TOTAL_PAGES="totalPages";a.FIRST_PAGE="first-page";a.LAST_PAGE="last-page";a.$VSE_DISPLAY_STRATEGY_ELEMENT=".a-carousel-display-vse";a.$RVS_G1=".RVS_G1";a.$RVS_G2=".RVS_G2";a.$IB_G1=".IB_G1";a.$IB_G2=".IB_G2";return a}(),z=function(){function a(c,b){this.element=c;this.videoVoteConfig=b;this.countsFetched=
!1;this.positiveVoteCount=0;this.showPositiveVotes=!1;this.negativeVoteCount=0;this.showNegativeVotes=!1;this.prompt=c.find(".vse-vote-helpful-text");this.positiveVoteText=c.find(".vse-vote-positive");this.positiveVoteIcon=c.find(".vse-vote-positive-icon");this.negativeVoteText=c.find(".vse-vote-negative");this.negativeVoteIcon=c.find(".vse-vote-negative-icon");this.previousVote=h.EMPTY_STRING}a.prototype.getVoteCount=function(a){return a===h.POSITIVE_VOTE?this.positiveVoteCount:a===h.NEGATIVE_VOTE?
this.negativeVoteCount:0};a.prototype.setVoteCount=function(a,b){0>b&&(b=0);a===h.POSITIVE_VOTE?(this.positiveVoteCount=b,this.positiveVoteText.html(String(b))):a===h.NEGATIVE_VOTE&&(this.negativeVoteCount=b,this.negativeVoteText.html(String(b)));this.element.addClass("updated")};a.prototype.getPreviousVote=function(){return this.previousVote};a.prototype.setPreviousVote=function(a){if(a===h.POSITIVE_VOTE)this.positiveVoteIcon.addClass("hasvoted"),this.negativeVoteIcon.removeClass("hasvoted"),0>=
this.getVoteCount(h.POSITIVE_VOTE)&&this.setVoteCount(h.POSITIVE_VOTE,1);else if(a===h.NEGATIVE_VOTE)this.negativeVoteIcon.addClass("hasvoted"),this.positiveVoteIcon.removeClass("hasvoted"),0>=this.getVoteCount(h.NEGATIVE_VOTE)&&this.setVoteCount(h.NEGATIVE_VOTE,1);else if(a===h.NONE_VOTE)this.negativeVoteIcon.removeClass("hasvoted"),this.positiveVoteIcon.removeClass("hasvoted");else return;this.previousVote=a};a.prototype.setContentId=function(a){this.contentId=a};a.prototype.getContentId=function(){return this.contentId};
a.prototype.showOrHide=function(a,b,e,f){this.showPositiveVotes=a;this.showNegativeVotes=b;this.showPrompt=e;a?(this.positiveVoteText.addClass("show"),this.positiveVoteIcon.addClass("show")):(this.positiveVoteText.removeClass("show"),this.positiveVoteIcon.removeClass("show"));b?(this.negativeVoteText.addClass("show"),this.negativeVoteIcon.addClass("show")):(this.negativeVoteText.removeClass("show"),this.negativeVoteIcon.removeClass("show"));e?this.prompt.addClass("show"):this.prompt.removeClass("show");
f?this.element.addClass("show"):this.element.removeClass("show")};a.prototype.updateWithNewVote=function(a){if(a===h.POSITIVE_VOTE||a===h.NEGATIVE_VOTE){var b=a==h.POSITIVE_VOTE?h.NEGATIVE_VOTE:h.POSITIVE_VOTE,e=this.getVoteCount(a),f=this.getVoteCount(b);a===this.getPreviousVote()?(this.setPreviousVote(h.NONE_VOTE),this.setVoteCount(a,e-1)):this.getPreviousVote()!==h.EMPTY_STRING&&this.getPreviousVote()!==h.NONE_VOTE?(this.setVoteCount(b,f-1),this.setVoteCount(a,e+1),this.setPreviousVote(a)):(this.setPreviousVote(a),
this.setVoteCount(a,e+1))}};return a}(),L=function(){return function(a,c,d){this.contentId=a;this.positiveVoteCount=c;this.negativeVoteCount=d}}(),B=function(){return function(a){this.name="InvalidArugmentsException";this.message=a}}(),C=function(){function a(b,d){this.A=b;this.videoVoteConfig=d}a.prototype.createFromContent=function(a,b){a=this.A.$("#"+a).find('[.vse-video-votes][data-contentid\x3d"'+b+'"]');return new z(a,this.videoVoteConfig)};a.prototype.createFromSelector=function(a){var b=this.A.$(""+
a);if(!b)throw new B("VideoVoteContainerFactory can not find selector by the name of "+a+".");return new z(b,this.videoVoteConfig)};a.prototype.sendVoteToRemote=function(a,b,e){var f=this,h=this.getBasicPayload(this.videoVoteConfig),g=this.A.$.extend(h,{contentId:e,positive:a,negative:b});return new this.videoVoteConfig.dependencies.promise(function(a,b){v.sendRequest(f.A,"/vap/ew/subcomponent/votes/writing",g,function(b){a(b)},function(a){t.count("vse:votecast:failed",1);b(a)})})};a.prototype.fetchVoteHistory=
function(a){var b=this,e=this.getBasicPayload(this.videoVoteConfig),f=this.A.$.extend(e,{contentId:a});return new this.videoVoteConfig.dependencies.promise(function(a,c){v.sendRequest(b.A,"/vap/ew/subcomponent/votes/status",f,function(b){a(b)},function(a){t.count("vse:votehistory:failed",1);c(a)})})};a.prototype.convertPayloadToVoteData=function(a){var b=[],e;for(e in a)a.hasOwnProperty(e)&&b.push(new L(e,a[e].positive,a[e].negative));return b};a.prototype.fetchVoteCounts=function(a){var b=this,e=
this.getBasicPayload(this.videoVoteConfig),f=this.A.$.extend(e,{contentIds:a});return new this.videoVoteConfig.dependencies.promise(function(a,c){v.sendRequest(b.A,"/vap/ew/subcomponent/votes",f,function(e){e=b.convertPayloadToVoteData(e);0<e.length&&a(e);c(e)},function(a){t.count("vse:votegetcounts:failed",1);c(a)})})};a.prototype.getBasicPayload=function(a){return{placement:a.placementContext,requestId:a.requestId,sessionId:a.sessionId,page:a.page,bypassLogin:a.forceTreatment||!1}};return a}(),
M=function(){function a(b){this.config=b;this.$stickies=null;this.$container=this.config.A.$(this.config.stickyHeaderContainer);this.$lbContainer=this.config.A.$(this.config.stickyHeaderLBContainer);this.lbModalContainer=this.config.lbModalContainer;this.gutter=this.$container.offset().top;this.topPosition=this.$container.offset().top-this.$lbContainer.closest(this.lbModalContainer).offset().top}a.prototype.load=function(a){if("object"===typeof a&&0<a.length){var b=this;this.$stickies=a.each(function(a){a=
b.config.A.$(this).parents(".vse-follow-wrap").length?b.config.A.$(this):b.config.A.$(this).wrap('\x3cdiv class\x3d"vse-follow-wrap" /\x3e');a.data("originalPosition",a.offset().top+b.$container.scrollTop()-b.gutter).data("originalHeight",a.outerHeight()).parent().height(a.outerHeight(!0))});this.$container.unbind("scroll");this.$container.bind("scroll",function(){b._whenScrolling()});this.$container.scroll()}};a.prototype._whenScrolling=function(){var a=this;this.$stickies.each(function(b){b=a.config.A.$(this);
var e=b.data("originalPosition"),f=a.$container.scrollTop();e<=f?b.addClass("vse-absolute").css({top:f}):b.removeClass("vse-absolute").removeAttr("style")})};return a}(),N=function(){function a(b,d,e,f,l){var g=this;this.carouselFramework=d;this.A=e;this.contentCarouselConfig=f;this.deps=l;this.vseAssets=[];this.vseAssetIndex={};this.voteContainerIndex={};this.carouselPageSize=this.carouselTotalPages=0;this.carouselPageNumber=1;this.getplaylist=function(){return g.vseAssets.slice()};this.getActiveAsset=
function(){return g.activeAsset};this.scrollTo=function(){if(g.contentCarouselConfig.hasStickyHeaders){var a=g.A.$("#"+g.contentCarouselConfig.carouselName).closest(".vse-lb-right"),b=0;0===g.activeCard.find(".vse-vc-header.first-item").length&&(b=g.A.$(".vse-follow-wrap").first().height()-2);a.animate({scrollTop:g.activeCard.offset().top-a.offset().top+a.scrollTop()-b})}else g.A.$("#"+g.contentCarouselConfig.carouselName).animate({scrollTop:g.activeCard.offset().top-g.A.$("#"+g.contentCarouselConfig.carouselName).offset().top+
g.A.$("#"+g.contentCarouselConfig.carouselName).scrollTop()})};this.rotateTo=function(a){g.markPlaying(a);g.contentCarouselConfig.isVerticalScroll&&g.scrollTo();0!==g.carouselPageSize&&(a=g.findIndex(a),-1!==a&&(a=Math.floor(a/g.carouselPageSize)+1,g.carouselPageNumber!=a&&g.auiCarousel.gotoPage(a)))};this.markPlaying=function(a){g.activeAsset=a;g.activeCard.removeClass("active");g.activeCard=g.vseAssetIndex[a.contentId].$el.closest("li").addClass("active")};this.findIndex=function(a){return g.vseAssets.indexOf(g.vseAssetIndex[a.contentId])};
this.emitRefTag=function(a,b){0<g.listOffset&&(a=(a-g.listOffset+g.vseAssets.length)%g.vseAssets.length);g.refTagRecorder.emitRefTag(b+a)};this.destroy=function(){g.A.$("#"+g.contentCarouselConfig.carouselName+" .a-carousel-card.active").removeClass("active")};this.updateVotingElements=function(a,b){g.A.each(a,function(a){var c=g.vseAssetIndex[a.contentId].videoVoteContainer;c.setVoteCount(h.POSITIVE_VOTE,a.positiveVoteCount);c.setVoteCount(h.NEGATIVE_VOTE,a.negativeVoteCount);c.countsFetched=!0;
c.showOrHide(b,b,!1,b)})};this.attachStickyHeader=function(a){g.stickyHeaders=new M(a);g.stickyHeaders.load(g.A.$(a.stickyHeaderContainer+" .vse-vc-header.first-item"))};this.getAssetSpec=function(a,b,c){var d=a.data(),e=a.find(".vse-video-image").data("img"),e=e.replace("SR160,90_BG0,0,0_PKvse-overlay-play2","").replace("SR320,180_BG0,0,0_PKvse-overlay-play2","");return{contentId:d.asin,title:d.title,vendorName:d.vendorName,vendorCode:d.vendorCode,referenceUrl:d.referenceUrl,referenceLinkTitle:d.referenceTitle,
videoUrl:d.videoUrl,$el:a,duration:d.duration,imageUrl:e,sponsored:d.sponsored,videoVoteContainer:g.voteContainerIndex[d.asin],productAsin:d.productAsin,refTag:c+b,relatedProducts:d.relatedProducts,vendorTrackingId:d.vendorTrackingId,videoReferenceId:d.videoRefId}};var k=e.$;this.activeCard=k([]);var m=this;this.auiCarousel=b;this.refTagRecorder=new K(e);k("#"+f.carouselName).find(".a-carousel-heading").after(k("#"+f.carouselName).find(".vse-upload-link").removeClass("aok-hidden"));k("#"+f.carouselName+
" .vse-video-item").each(function(a){a=m.getAssetSpec(k(this),a,m.contentCarouselConfig.refTagPrefix);m.vseAssets.push(a);m.vseAssetIndex[a.contentId]=a});f.showVideoVotes&&f.videoVoteConfig&&(this.videoVoteContainerFactory=new C(e,f.videoVoteConfig),e.each(this.vseAssetIndex,function(a){g.voteContainerIndex[a.contentId]=g.videoVoteContainerFactory.createFromContent(g.contentCarouselConfig.carouselName,a.contentId);a.videoVoteContainer=g.voteContainerIndex[a.contentId]}));k("#"+f.carouselName+" .vse-video-card").find(h.$RVS_G1).first().addClass("first-item");
k("#"+f.carouselName+" .vse-video-card").find(h.$RVS_G2).first().addClass("first-item");k("#"+f.carouselName+" .vse-video-card").find(h.$IB_G1).first().addClass("first-item");k("#"+f.carouselName+" .vse-video-card").find(h.$IB_G2).first().addClass("first-item");k("#"+f.carouselName).delegate(".a-carousel-card a","click",function(a){if(k(this).closest("li").hasClass("active"))a.preventDefault();else{var b=m.vseAssetIndex[k(this).closest("li").find(".vse-video-item").data("asin")];m.markPlaying(b);
b.eventTimestamp=Date.now();e.trigger("vse:contentCarousel:"+f.carouselName+":click",b);b=m.findIndex(b);m.emitRefTag(b,m.contentCarouselConfig.refTagPrefix);f.isPreventDefault&&a.preventDefault()}});k("#"+f.carouselName+" .vse-carousel-item").each(function(a){var b=k(this);b.attr("href",b.data("redirect-url")+"?ref\x3d"+m.contentCarouselConfig.refTagPrefix+a)});e.off("a:carousel:"+f.carouselName+":change:pageSize");e.off("a:carousel:"+f.carouselName+":change:pageNumber");e.on("a:carousel:"+f.carouselName+
":change:pageSize",function(){g.carouselPageSize=g.auiCarousel.getAttr("pageSize");g.activeAsset&&g.rotateTo(g.activeAsset)});e.trigger("a:carousel:"+f.carouselName+":change:pageSize");e.on("a:carousel:"+f.carouselName+":change:pageNumber",function(a){var b=a.carousel;a=a.newValue;var c=b.getAttr("totalPages");b.dom.$carousel.closest(h.$VSE_DISPLAY_STRATEGY_ELEMENT).toggleClass(h.FIRST_PAGE,1===a);b.dom.$carousel.closest(h.$VSE_DISPLAY_STRATEGY_ELEMENT).toggleClass(h.LAST_PAGE,a===c);g.carouselPageNumber=
g.auiCarousel.getAttr("pageNumber");e.trigger("a:carousel:"+f.carouselName+":scrollCarousel",g.carouselPageNumber,g.carouselPageSize)});e.trigger("a:carousel:"+f.carouselName+":updatePageIndex",this.carouselPageNumber,this.carouselPageSize);e.declarative(f.carouselName+"-sm-link","click touch",function(a){k("#"+f.carouselName+" .vse-video-item .vse-carousel-item").first().click()})}a.prototype.changeStartingCardTo=function(a){var b=this;this.listOffset=this.findIndex(a);var e=this;this.A.$("#"+this.contentCarouselConfig.carouselName+
" .vse-carousel-item").each(function(a){var b=e.A.$(this);a=(a-e.listOffset+e.vseAssets.length)%e.vseAssets.length;b.attr("href",b.data("redirect-url")+"?ref\x3d"+e.contentCarouselConfig.refTagPrefix+a)});this.contentCarouselConfig.isVerticalScroll||(this.carouselFramework.initializeAll(),this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(){b.rotateTo(a)}))};return a}(),O=function(){function a(b,d,e){this.carouselFramework=b;this.A=d;this.deps=e}a.prototype.create=function(a){var b=
this.carouselFramework.getCarousel(this.A.$("#"+a.carouselName));if(!b)throw new B("Carousel framework can not find carousel by the name of "+a.carouselName+".");return new N(b,this.carouselFramework,this.A,a,this.deps)};return a}(),p=function(){function a(){}a.ELM_OTHER_OPTION=".vse-fb-other";a.ELM_RBTN_CHECKED='input[name\x3d"FeedbackInput"]:checked';a.ELM_CHECKBOX_CHECKED='input[type\x3d"checkbox"]:checked';a.DATA_REQ_MSG="requiredcommentmessage";a.DATA_OPTIONAL_MSG="optionalcommentmessage";a.ATTR_NAME_PLACEHOLDER=
"placeholder";return a}(),D=q,E=q;m.when("a-sheet").execute(function(a){D=a});m.when("a-popover").execute(function(a){E=a});var F={getBottomSheet:function(){return D},getPopoverFactory:function(){return E}},P=function(){function a(b){var d=this;this.config=b;this.activeVideoSource=this.activeVideo="VIDEO_NOT_SELECTED";this.isOtherSelected=this.registered=!1;this.setBottomSheetHeight=!0;this.internalRejectedVideo=!1;this.defaultBottomSheetHeight=400;this._submitErrorCallback=function(a){d.A.trigger("vse:"+
d.id+":feedback:submitted:error")};this._submitSuccessCallback=function(a){d.A.trigger("vse:"+d.id+":feedback:submitted:success")};this.A=b.A;this.pageStateName=b.pageStateName;this.buttonApi=b.buttonApi;this.id=this.config.id;this.A.state.parse();this.A.state.replace(this.pageStateName,JSON.parse(this.A.$("script[type\x3d'a-state'][data-a-state*\x3d"+this.pageStateName+"]").html()));b=this.A.state(this.pageStateName);this.feedbackSection=this.A.$("#"+this.id);this.feedbackForm=this.A.$("#"+this.id+
"-form");this.commentBox=this.A.$("#"+this.id+"-comment-box");this.requiredCommentMessage=this.commentBox.parent().data(p.DATA_REQ_MSG);this.optionalCommentMessage=this.commentBox.parent().data(p.DATA_OPTIONAL_MSG);this.thankYouSection=this.A.$("#"+this.id+"-ty-container");this.submitButton=this.buttonApi("#"+this.id+"-btn-submit");this.cancelButton=this.A.$("#"+this.id+"-btn-cancel");b&&this.validateFormElements()&&(this.isMobile=b.isMobile,this.endpoint=b.feedbackEndpoint,this.isInternal=b.isInternal,
this.marketplaceId=b.marketplaceId,this.pageAsin=b.pageAsin,this.customerId=b.customerId,this.bottomSheetFactory=F.getBottomSheet(),this.popoverFactory=F.getPopoverFactory(),this.registered||(this.A.declarative(this.id+"-options-choose","click",function(a){d.activeSelectionEvent=a;d.A.$(a)&&d.A.$(a.$target)&&(d.currentViolations=d.A.$(a.$target).closest(".vse-fb-option").find("input").val());d.otherSection=a.$target.closest(p.ELM_OTHER_OPTION);1===d.otherSection.length?(d.updatePlaceholderString(d.requiredCommentMessage),
d.isOtherSelected=!0):(d.isOtherSelected=!1,d.updatePlaceholderString(d.optionalCommentMessage));d.submitButton.enable()}),this.A.declarative(this.id+"-andoncord-check","change",function(a){d.internalRejectedVideo=a.$target.is(":checked")}),this.A.declarative(this.id+"-btn-close","click",function(){return d.closeFeedbackForm()}),this.A.declarative(this.id+"-btn-cancel","click",function(){return d.cancelFeedbackForm()}),this.A.declarative(this.id+"-btn-submit","click",function(){return d.submitFeedback()}),
this.A.on("a:sheet:afterShow:"+this.id+"-sheet",function(a){d.defaultBottomSheetHeight=.75*d.A.$(l).height();d.changeBottomSheetHeight(a,d.defaultBottomSheetHeight);d.showFeedbackForm()}),this.A.on("a:sheet:afterHide:"+this.id+"-sheet",function(a){d.resetFeedbackForm().hideThankYou();d.A.trigger("vse:"+d.id+":feedback:hidden")}),this.A.on("a:popover:afterShow:"+this.id+"-popover",function(a){d.showFeedbackForm()}),this.A.on("a:popover:afterHide:"+this.id+"-popover",function(a){d.hideFeedbackForm()}),
this.registered=!0))}a.prototype.showFeedbackForm=function(a){this.A.trigger("vse:"+this.id+":feedback:shown");return this};a.prototype.hideFeedbackForm=function(){this.isMobile?this.getAndSetBottomSheetInstance()&&this.bottomSheetInstance.hide():this.getAndSetPopoverInstance()&&this.popoverInstance.hide();this.resetFeedbackForm().hideThankYou();this.A.trigger("vse:"+this.id+":feedback:hidden");return this};a.prototype.setActiveVideoAndSource=function(a,b){this.activeVideo=a;this.activeVideoSource=
b};a.prototype.submitFeedback=function(){if(this.isOtherSelected&&this.commentBox&&""===this.commentBox.val())this.commentBox.focus();else{var a={events:[{data:{feedback:{additionalComments:this.commentBox?this.commentBox.val():"",playerVersion:"",asin:this.pageAsin,videoId:this.activeVideo,videoSource:this.activeVideoSource,violations:this.currentViolations,url:document.location.href,userAgent:l.navigator&&l.navigator.userAgent?l.navigator.userAgent:"window.navigator.userAgent not supported",feedbackTime:this.A.now(),
customerId:this.customerId,isInternal:this.isInternal,feedbackWidgetVersion:"2",marketplace:this.marketplaceId,internalRejectedVideo:this.internalRejectedVideo,placement:this.pageStateName}}}]};this.A.$.ajax({url:this.endpoint,data:JSON.stringify(a),type:"POST",contentType:"application/json; charset\x3dutf-8",error:this._submitErrorCallback,success:this._submitSuccessCallback});this.A.trigger("vse:"+this.id+":feedback:submitted");this.resetFeedbackForm().showThankYou()}};a.prototype.cancelFeedbackForm=
function(){this.resetFeedbackForm();this.A.trigger("vse:"+this.id+":feedback:cancelled")};a.prototype.closeFeedbackForm=function(){this.hideFeedbackForm();this.A.trigger("vse:"+this.id+":feedback:closed")};a.prototype.resetFeedbackForm=function(){this.submitButton.disable();this.feedbackSection.find(p.ELM_RBTN_CHECKED).each(function(){this.checked=!1});this.updatePlaceholderString(this.optionalCommentMessage);this.commentBox.val("");this.internalRejectedVideo=!1;this.feedbackSection.find(p.ELM_CHECKBOX_CHECKED).each(function(){this.checked=
!1});return this};a.prototype.showThankYou=function(){this.feedbackForm.fadeOut(200);this.thankYouSection.addClass("show").removeClass("aok-hidden").fadeIn(400);this.A.trigger("vse:"+this.id+":thank-you:shown");return this};a.prototype.hideThankYou=function(){this.feedbackForm.fadeIn(10);this.thankYouSection.addClass("aok-hidden").removeClass("show").fadeOut(10);this.A.trigger("vse:"+this.id+":thank-you:hidden");return this};a.prototype.validateFormElements=function(){return this.feedbackSection.length&&
this.commentBox.length&&this.thankYouSection.length&&this.submitButton.size()&&this.cancelButton.length&&this.feedbackForm.length};a.prototype.updatePlaceholderString=function(a){this.commentBox.attr(p.ATTR_NAME_PLACEHOLDER,a)};a.prototype.changeBottomSheetHeight=function(a,b){this.setBottomSheetHeight&&(a.sheet.changeHeight({duration:.3,height:b}),this.setBottomSheetHeight=!1)};a.prototype.getAndSetBottomSheetInstance=function(){return this.bottomSheetFactory?this.bottomSheetInstance?this.bottomSheetInstance:
this.bottomSheetInstance=this.bottomSheetFactory.get(this.id+"-sheet"):q};a.prototype.getAndSetPopoverInstance=function(){return this.popoverFactory?this.popoverInstance?this.popoverInstance:this.popoverInstance=this.popoverFactory.get(this.id+"-popover"):q};return a}(),Q=function(){function a(b){this.config=b;this.feedbackWidgets={}}a.prototype.create=function(a,b){b=this.feedbackWidgets[a]||new P({id:a,pageStateName:b,A:this.config.A,buttonApi:this.config.buttonApi});return this.feedbackWidgets[a]=
b};a.prototype.get=function(a){return this.feedbackWidgets[a]};return a}(),n=function(){function a(){}a.WIDTH_ASPECT_RATIO=1.77;a.EMPTY_STRING="";a.ibMetadata=".vse-md-container.vse-ib-metadata";a.videoInformationContainer=".vse-md-container .video-title-ellipsis-wrapper .vse-content-title";a.mobileMovableContainer=".vse-vb-movable-container";a.mobileFixedContainer=".vse-mobile-fixed-container";a.videoPlayerContainer=".vse-airy-container";a.viewVideosLinkClickedMetricName="vseMediaBlockButtonClicked_viewVideosLink";
a.videoActionStrip=".vse-player-container .vse-video-action-strip";a.socialShareClickMetricName="vseSocialShareClickImageBlock";a.ibVideoOspDisclosure=".vse-md-container .vse-md-details .vse-md-info .vse-oap-disclosure";a.ibVendorName=".vse-md-container .vse-video-author";a.vendorCRCode="AOD60";return a}(),a={vars:{A:{},isMobile:!1,relatedVideosCarousel:null,newHref:"",newrefTag:"dp_vse_ib",activeVideoVoteContainer:null,sushiMetricsConfig:null,buildSushiPayload:null,videoVoteContainerFactory:null,
hasGroups:!1,showVotes:!1,forceMobileResize:!1,ibCarouselName:"#vse-ib-rvs",playerInstance:null,isMshop:!1,mShopFactory:null,isFeedbackClosed:!0,feedbackInstance:null,playerContainerID:null,showSegments:!1,socialSharePageStateName:""},resizeMobilePopover:function(){var b=a.vars.A.$,c=b(l).height(),d=b(n.mobileFixedContainer).outerHeight(!0);b(n.mobileMovableContainer).css({"max-height":c-d,top:d});b(a.vars.ibCarouselName).removeAttr("style")},resizeImmersiveView:function(){var b=a.vars.A.$("#ivVideoBlock"),
c=a.vars.A.$("#ivVideosTab").height();b.css("height",c);var d=b.find(".vse-video-block"),e=c-a.getDimension(b,"padding-top")-a.getDimension(b,"padding-bottom");d.css({"max-height":c,overflow:"hidden"});c=b.find(n.videoPlayerContainer);b=b.find(n.ibMetadata);e=Math.floor(e-a.getDimension(b,"height"));d=Math.floor(e*n.WIDTH_ASPECT_RATIO);c.css({"max-height":e,"max-width":d});b.css("max-width",d);a.vars.A.$(n.videoActionStrip).css({"max-width":c.width()})},updateMediaInfo:function(b){a.vars.A.$(n.videoInformationContainer).text(b.title);
a.vars.A.$(n.ibVendorName).text(b.vendorName);a.isOspEnabled(b)?a.vars.A.$(n.ibVideoOspDisclosure).removeClass("aok-hidden"):a.vars.A.$(n.ibVideoOspDisclosure).addClass("aok-hidden");a.vars.showVotes&&(a.updateActiveVideoVoteContainer(b),a.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0))},resizeVideoImmersiveView:function(){a.vars.isMobile?a.resizeMobilePopover():a.resizeImmersiveView()},updateActiveVideoVoteContainer:function(b){a.vars.showVotes&&(a.vars.activeVideoVoteContainer.setContentId(b.contentId),
a.vars.activeVideoVoteContainer.setVoteCount(h.POSITIVE_VOTE,b.videoVoteContainer.getVoteCount(h.POSITIVE_VOTE)),a.vars.activeVideoVoteContainer.setVoteCount(h.NEGATIVE_VOTE,b.videoVoteContainer.getVoteCount(h.NEGATIVE_VOTE)),a.fetchAndUpdateVotingCount(),a.fetchAndUpdateVotingHistory())},castVote:function(b){if(a.vars.videoVoteContainerFactory&&a.vars.videoVoteContainerFactory.videoVoteConfig){var c=a.vars.activeVideoVoteContainer.getPreviousVote(),d=b===h.POSITIVE_VOTE&&c!=h.POSITIVE_VOTE,c=b===
h.NEGATIVE_VOTE&&c!=h.NEGATIVE_VOTE;a.vars.activeVideoVoteContainer.updateWithNewVote(b);a.vars.videoVoteContainerFactory.sendVoteToRemote(d,c,a.vars.activeVideoVoteContainer.getContentId()).then(function(c){a.vars.videoVoteContainerFactory&&a.vars.videoVoteContainerFactory.videoVoteConfig&&a.vars.A.trigger(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast",b)},function(c){t.count("ibiv.videovote.votecastfailure",1);a.vars.activeVideoVoteContainer.updateWithNewVote(b)})}},
getDimension:function(a,c){a=parseInt(a.css(c),10);return isNaN(a)?0:a},isDefined:function(a){return"undefined"!==typeof a&&null!==a},fetchAndUpdateVotingHistory:function(){var b=a.vars.relatedVideosCarousel.getActiveAsset();b.videoVoteContainer&&(b.videoVoteContainer.getPreviousVote()!==h.EMPTY_STRING?a.vars.activeVideoVoteContainer.setPreviousVote(b.videoVoteContainer.getPreviousVote()):a.vars.videoVoteContainerFactory.fetchVoteHistory(b.contentId).then(function(c){a.vars.videoVoteContainerFactory===
q||c!==h.POSITIVE_VOTE&&c!==h.NEGATIVE_VOTE&&c!==h.NONE_VOTE||(a.vars.activeVideoVoteContainer.setPreviousVote(c),b.videoVoteContainer.setPreviousVote(c))},function(a){t.count("ibiv.videovote.votehistoryfailure",1)}))},fetchAndUpdateVotingCount:function(){var b=a.vars.relatedVideosCarousel.getActiveAsset();b.videoVoteContainer&&!b.videoVoteContainer.countsFetched&&a.vars.videoVoteContainerFactory.fetchVoteCounts([b.contentId]).then(function(c){a.vars.relatedVideosCarousel.updateVotingElements(c,!1);
for(var d=0;d<c.length;d++)if(c[d].contentId===b.contentId){b.videoVoteContainer.setVoteCount(h.POSITIVE_VOTE,c[d].positiveVoteCount);b.videoVoteContainer.setVoteCount(h.NEGATIVE_VOTE,c[d].negativeVoteCount);b.videoVoteContainer.countsFetched=!0;a.vars.activeVideoVoteContainer.setVoteCount(h.POSITIVE_VOTE,c[d].positiveVoteCount);a.vars.activeVideoVoteContainer.setVoteCount(h.NEGATIVE_VOTE,c[d].negativeVoteCount);break}a.vars.activeVideoVoteContainer.countsFetched=!0;a.vars.activeVideoVoteContainer.showOrHide(!0,
!0,!0,!0);a.vars.isMobile?a.resizeMobilePopover():a.resizeImmersiveView()},function(b){t.count("ibiv.videovote.votecountfailure",1);a.vars.A.trigger(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-hide-votes")})},getCurrentlyPlayingVideoInCarousel:function(b){b=a.vars.relatedVideosCarousel.getplaylist()[b];a.vars.relatedVideosCarousel.markPlaying(b);return b},showFeedbackLink:function(b,c){a.vars.A.$(b).css({display:"inline-block"});a.vars.A.$(c).addClass("dim-video-player")},hideFeedbackLink:function(b,
c){a.vars.A.$(b).css({display:"none"});a.vars.A.$(c).removeClass("dim-video-player")},refreshSocialSharePageState:function(b){var c=a.constructShareBaseUrl()+b.contentId;a.vars.A.state.replace(a.vars.socialSharePageStateName,{pageLevelData:{clientRef:"ib",deviceTypeRef:a.vars.isMobile?"mb":"dt"},url:c,image:b.imageUrl,title:b.title,description:b.title})},getMshopShareParams:function(b){var c=a.constructShareBaseUrl()+b.contentId;b=b.title+" "+c;var d="\x3cdiv\x3e \x3cp\x3e"+b+" "+c+"\x3c/p\x3e \x3c/div\x3e";
return{subject:b,messagePlain160:b.substring(0,160),messagePlain140:b.substring(0,140),messageHTML:d,messagePlain:b,url:c}},constructShareBaseUrl:function(){return(a.isDefined(l.location.origin)?l.location.origin:"https://www.amazon.com")+"/vdp/"},getNextAsset:function(b){for(var c=a.vars.relatedVideosCarousel.getplaylist(),d=0;d<c.length;d++)if(c[d].contentId==b.contentId)return c[d+1]},loadMedia:function(b){var c={mediaSourceInfo:[b.videoUrl],contentId:b.contentId,refTag:b.refTag?b.refTag:"",vendorTrackingId:b.vendorTrackingId,
videoReferenceId:b.videoReferenceId,productAsin:b.productAsin};a.isDefined(a.vars.playerInstance)&&(a.vars.playerInstance.attach(a.vars.playerContainerID),a.vars.playerInstance.loadMedia(c),a.vars.playerInstance.play({isAsync:!0,eventTimestamp:(new Date).getTime()}),a.updateMediaInfo(b),a.resizeVideoImmersiveView(),a.refreshSocialSharePageState(b),a.isDefined(a.vars.feedbackInstance)&&a.vars.feedbackInstance.setActiveVideoAndSource(b.contentId,b.vendorCode))},isOspEnabled:function(b){return a.vars.showSegments&&
""!=b.vendorTrackingId}},R=function(){function b(a,b){this.brilaFactory=a;this.config=b}b.prototype.embed=function(){var a=this,b=document.getElementById(this.config.parentId),e=this.config.parentId+"-element",f=document.createElement("video");f.id=e;f.className="video-js brila-video-js";f.setAttribute("playsinline","true");this.config.shouldDisableControls||f.setAttribute("controls","true");this.config.shouldAutoplay&&f.setAttribute("autoplay","true");this.config.shouldStartMuted&&f.setAttribute("muted",
"true");b.appendChild(f);this.videoJS=this.brilaFactory.embed(e,this.config,{player:{html5:{nativeTextTracks:!1}}});document.getElementById(e).setAttribute("style","width:100%; height:100%;");this.videoJS.src(this.config.mediaSourceInfo[0]);this.vseMetrics=this.brilaFactory.metrics(this.videoJS);this.config.videoAds.isEngineEnabled&&(this.vseAds=this.brilaFactory.ads(this.videoJS));this.videoJS.on("play",function(){a.config.bindings.play()});this.videoJS.on("firstplay",function(){a.config.bindings.play()});
this.videoJS.on("fullscreenchange",function(){a.videoJS.isFullscreen()?a.config.bindings.fullscreen():a.config.bindings.normalscreen()});this.videoJS.on("ended",function(){a.config.bindings.ended()});return this.wrapper()};b.prototype.wrapper=function(){var b=this;return{attach:function(a){},isFullScreen:function(){return b.videoJS.isFullscreen()},enterFullScreen:function(){b.videoJS.requestFullscreen()},enterFullWindow:function(){b.videoJS.enterFullWindow()},enterNormalScreen:function(){b.videoJS.exitFullscreen()},
play:function(d){a.isDefined(d)&&a.isDefined(d.eventTimestamp)&&b.vseMetrics.setPageLoadStartTimestamp(d.eventTimestamp);return b.videoJS.play()},pause:function(){b.videoJS.pause()},loadMedia:function(a){var e=a.contentId,f=a.mediaSourceInfo[0],h=a.refTag?a.refTag:"";a={vendorTrackingId:a.vendorTrackingId,videoReferenceId:a.videoReferenceId,productAsin:a.productAsin};b.vseMetrics.setRefTag&&b.vseMetrics.setRefTag(h);b.vseMetrics.setContentId&&b.vseMetrics.setContentId(e);b.vseMetrics.setOspAttribution&&
b.vseMetrics.setOspAttribution(a);b.config.videoAds.isEngineEnabled&&b.vseAds.setContentId(e);b.videoJS.src(f)},destroy:function(){b.videoJS.dispose()}}};return b}();try{var T=function(b){return new b(function(b,d){m.when("A","a-carousel-framework","3p-promise","a-button","ready").register("VSECommonComponentAssets",function(d,f,k,g){var q,r;a.vars.A=d;var p;a.vars.A.on("vseAiry",function(){m.when("mash").execute("NilgiriService-Mash-Detection",function(b){a.vars.A.$(".vse-video-block").addClass("mshop");
a.isMshop=!0;a.mShopFactory=b})});a.vars.A.on.orientationchange(function(b){if(0===b.orientation){b=b.height;var c=a.vars.A.$(n.mobileFixedContainer).outerHeight(!0);a.vars.A.$("#"+q).css({"max-height":b-c,top:c})}});return{initCarousel:function(b){try{a.vars.A.state.parse();a.vars.A.state.replace(""+b,JSON.parse(a.vars.A.$("script[type\x3d'a-state'][data-a-state*\x3d"+b+"]").html()));var c=a.vars.A.state(""+b);if(c){b={gatedP:y,promise:k};var g=new O(f,d,b);f.createAll();f.initializeAll();a.vars.relatedVideosCarousel=
g.create(c);a.vars.ibCarouselName="#"+c.carouselName;a.vars.showSegments=c.showSegments;a.vars.showSegments&&(a.vars.A.$(a.vars.ibCarouselName).removeClass("vse-apply-play-icon"),a.vars.A.$(n.ibMetadata).removeClass("vse-hide-details"));var m=d.$.extend({},c.videoVoteConfig);m.hasOwnProperty("placementContext")&&(m.dependencies=b,a.vars.videoVoteContainerFactory=new C(d,m),a.vars.activeVideoVoteContainer=a.vars.videoVoteContainerFactory.createFromSelector("#vse-video-votes-lb-details-"+m.placementContext));
q=c.carouselName;var G=a.vars.A.state(a.vars.socialSharePageStateName),w=a.isDefined(G)?G.clientPrefix:"vse-iv";a.vars.A.on("vse:contentCarousel:"+q+":click",function(b){a.loadMedia(b)});var p=a.getCurrentlyPlayingVideoInCarousel(0);if(a.vars.A.$("#image-block-video-carousel").length)var r=a.vars.A.$("#image-block-video-carousel-pagination-dots ul li.a-selected").index(),p=a.getCurrentlyPlayingVideoInCarousel(r);a.vars.A.on("a:popover:afterShow:video-immersive-view",function(){if(a.vars.A.$("#image-block-video-carousel").length){var b=
a.vars.A.$("#image-block-video-carousel-pagination-dots ul li.a-selected").index(),b=a.getCurrentlyPlayingVideoInCarousel(b);a.updateMediaInfo(b);a.refreshSocialSharePageState(b)}});var x=a.vars.relatedVideosCarousel.getActiveAsset();a.vars.showVotes=a.vars.videoVoteContainerFactory&&a.vars.videoVoteContainerFactory.videoVoteConfig&&x&&x.videoVoteContainer&&!a.vars.videoVoteFailure&&(a.vars.isMobile||!a.vars.hasGroups);a.refreshSocialSharePageState(x);a.isMshop&&a.isDefined(a.mShopFactory)&&a.vars.A.declarative(w+
"-social-share-mshop-action","click touch",function(b){b=a.vars.relatedVideosCarousel.getActiveAsset();b=a.getMshopShareParams(b);a.mShopFactory.share(b)});a.vars.showVotes&&(a.updateActiveVideoVoteContainer(a.vars.relatedVideosCarousel.getActiveAsset()),a.vars.A.on(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-hide-votes",function(){a.vars.activeVideoVoteContainer.showOrHide(!1,!1,!1,!1);a.vars.videoVoteFailure=!0}),a.vars.A.off("a:declarative:"+(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+
"-vote-positive")+":click"),a.vars.A.off("a:declarative:"+(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-negative")+":click"),a.vars.A.declarative(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-positive","click",function(){a.castVote(h.POSITIVE_VOTE)}),a.vars.A.declarative(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-negative","click",function(){a.castVote(h.NEGATIVE_VOTE)}),a.vars.A.on(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+
"-vote-cast",function(b){var c=b===h.POSITIVE_VOTE?h.NEGATIVE_VOTE:h.POSITIVE_VOTE,d=a.vars.relatedVideosCarousel.getActiveAsset(),e=h.EMPTY_STRING;d&&d.videoVoteContainer&&(e=d.videoVoteContainer.getPreviousVote()===b?"cancel:"+b:d.videoVoteContainer.getPreviousVote()===h.POSITIVE_VOTE||d.videoVoteContainer.getPreviousVote()===h.NEGATIVE_VOTE?"switch-"+c+"-to-"+b:b,d.videoVoteContainer.updateWithNewVote(b));a.vars.sushiMetricsConfig&&a.vars.sushiMetricsConfig.endpoint!==n.EMPTY_STRING&&(b=a.vars.buildSushiPayload({eventName:"ibiv.videovote.castvote:"+
e,stringPayload:n.EMPTY_STRING,intPayload:1,videoAsin:d.contentId}),t.emitSushiMetric(b,a.vars.sushiMetricsConfig.endpoint))}));a.vars.A.off("a:declarative:"+w+"-swf-share-network:click");a.vars.A.on("a:declarative:"+w+"-swf-share-network:click",function(b){a.vars.relatedVideosCarousel.getActiveAsset();b=b.data;var c=a.vars.A.state(a.vars.socialSharePageStateName);J.share(c,b.network);t.count(n.socialShareClickMetricName,1)});a.vars.isMobile&&(a.updateMediaInfo(p),a.resizeVideoImmersiveView())}}catch(u){l.ueLogError&&
l.ueLogError(u,{logLevel:"FATAL",attribution:"vse-nilgiri-service",message:"InitializeVSECarousel: "})}},initPlayer:function(b,c,d){try{var e=!1;a.vars.socialSharePageStateName=d;a.vars.A.state.parse();a.vars.A.state.replace(""+b,JSON.parse(a.vars.A.$("script[type\x3d'a-state'][data-a-state*\x3d"+b+"]").html()));var f=a.vars.A.state(""+b);if(f){p={onScreenChange:function(){e=!1;a.vars.A.trigger("vsePlayerScreenChange",e)},onFullScreen:function(){e=!0;a.vars.A.$("#vse-ns-airy-container-element video").removeClass("dim-video-player")},
onPlay:function(){a.isDefined(a.vars.playerInstance)&&"true"===h.enableFullScreenByDefault.toLowerCase()&&!a.vars.playerInstance.isFullScreen()&&a.vars.playerInstance.enterFullScreen({isAsync:!0});a.vars.isMobile&&a.hideFeedbackLink("#div-feedback","#vse-ns-airy-container-element video")},onPlaybackComplete:function(){if(a.vars.showSegments){var b=a.getNextAsset(a.vars.relatedVideosCarousel.getActiveAsset());b&&(a.loadMedia(b),a.vars.relatedVideosCarousel.markPlaying(b))}}};var g=f.foresterConfiguration,
h=f.playerConfiguration;a.vars.isMobile=f.isMobile;var k={contentId:g.contentId,customerId:f.sushiMetricsConfig.customerId,foresterMetadataParams:{client:g.client,marketplaceId:g.marketplaceId,method:g.method,requestId:g.requestId,session:g.sessionId},mediaSourceInfo:[f.videoUrl],pageAsin:g.pageAsin,parentId:f.id,bindings:{play:function(){return p.onPlay()},normalscreen:function(){return p.onScreenChange()},fullscreen:function(){return p.onFullScreen()},ended:function(){return p.onPlaybackComplete()}}};
f.sushiMetricsConfig&&f.sushiMetricsConfig.endpoint!==n.EMPTY_STRING&&(k.sushiMetricsConfig=f.sushiMetricsConfig);a.vars.A.$("#image-block-media-view-videos-link-row a").click(function(){t.count(n.viewVideosLinkClickedMetricName,1)});a.vars.A.on("a:popover:afterShow:video-immersive-view",function(){a.vars.A.$("body").addClass("vse-lb-no-scroll");a.isMshop&&a.isDefined(a.mShopFactory)&&a.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})});a.vars.A.on("a:popover:beforeHide:video-immersive-view",
function(){a.vars.A.$("body").removeClass("vse-lb-no-scroll");a.isMshop&&a.isDefined(a.mShopFactory)&&a.mShopFactory.dispatchEvent({type:"appOverlays.Show"})});a.vars.playerContainerID=f.id;m.when("brila").execute("NS-Brila-Player",function(b){a.isDefined(a.vars.playerInstance)&&"function"===typeof a.vars.playerInstance.destroy&&a.vars.playerInstance.destroy();var c=a.vars.A.$.extend({},k,{videoAds:{isEngineEnabled:!1},shouldStartMuted:!1,shouldAutoplay:!1,shouldDisableControls:!1});b=new R(b,c);
a.vars.playerInstance=b.embed();a.vars.A.trigger("vseAiry",{airy:a.vars.playerInstance,containerId:a.vars.playerContainerID});a.vars.A.declarative("a-secondary-view","click touch",function(b){"video-immersive-view"===b.data.name&&a.isDefined(a.vars.playerInstance)&&!a.vars.playerInstance.isFullScreen()&&(r=a.vars.A.$("#image-block-video-carousel").length?a.vars.A.$("#image-block-video-carousel li .vse-video-element").closest("a.video-data-wrapper").data():a.vars.A.$("#image-block li .vse-video-element").closest("a.video-data-wrapper").data(),
("true"===h.enableFullScreenByDefault.toLowerCase()||a.isDefined(r)&&1===r.videoCount)&&a.vars.playerInstance.enterFullScreen())})});var q=a.vars.A.$("#div-feedback");a.vars.A.$("#vse-ns-airy-container").append(q);var u=I.fetchLatestPageState(a.vars.A,""+c);u&&u.sushiMetricsConfig&&(a.vars.sushiMetricsConfig=u.sushiMetricsConfig,a.vars.buildSushiPayload=H.makeApplicationSushiPayloadBuilder(a.vars.A,a.vars.sushiMetricsConfig))}}catch(S){l.ueLogError&&l.ueLogError(S,{logLevel:"FATAL",attribution:"vse-nilgiri-service",
message:"InitializePlayer: "})}},initFeedback:function(b,c){try{var f=new Q({A:d,buttonApi:g});a.vars.feedbackInstance=f.create(b,c);var h=a.vars.A.state("vse_dp_airy").foresterConfiguration.contentId,k=a.vars.A.state("vse_dp_airy").vendorCode;a.vars.feedbackInstance.setActiveVideoAndSource(h,k);var m=!1;d.declarative.create(a.vars.A.$("#vse-ns-airy-container"),"feedback-overlays-player",{});a.vars.A.declarative("feedback-overlays-player","mouseenter touchstart focus",function(b){(a.vars.isFeedbackClosed||
a.vars.isMobile)&&a.showFeedbackLink("#div-feedback","#vse-ns-airy-container-element video");m=!0});a.vars.A.declarative("feedback-overlays-player","mouseleave",function(b){(a.vars.isFeedbackClosed||a.vars.isMobile)&&a.hideFeedbackLink("#div-feedback","#vse-ns-airy-container-element video");m=!1});a.vars.A.on("vse:"+b+":feedback:shown",function(){a.vars.playerInstance.pause();a.vars.isFeedbackClosed=!1});a.vars.A.on("vse:"+b+":feedback:hidden",function(){a.vars.playerInstance.play();a.vars.isFeedbackClosed=
!0;m||a.hideFeedbackLink("#div-feedback","#vse-ns-airy-container-element video");a.isMshop&&a.isDefined(a.mShopFactory)&&d.delay(function(){a.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})},500)})}catch(n){l.ueLogError&&l.ueLogError(n,{logLevel:"FATAL",attribution:"vse-nilgiri-service",message:"InitializeVSEFeedback: "})}},_noneFeature:b()}})})};m.when("A","3p-promise").execute("VSE-gatedP-register-ns-client",function(a,c){y.register("VSECommonComponentAssets","VSE-NS-client-registered",T,
c)})}catch(b){l.ueLogError&&l.ueLogError(b,{logLevel:"ERROR",attribution:"vse-nilgiri-service",message:"NSE: "})}})()});