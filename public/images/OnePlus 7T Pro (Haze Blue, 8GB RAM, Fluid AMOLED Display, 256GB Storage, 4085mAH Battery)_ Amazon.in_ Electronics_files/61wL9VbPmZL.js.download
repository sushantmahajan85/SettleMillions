(function(y){var q=window.AmazonUIPageJS||window.P,ra=q._namespace||q.attributeErrors,h=ra?ra("DetailPageImageBlockAssets",""):q;h.guardFatal?h.guardFatal(y)(h,window):h.execute(function(){y(h,window)})})(function(y,q,ra){y.register("postMetric",function(){return{postCountMetric:function(h){if("undefined"!==typeof h){var a=q.ue;if(a){var b=a.count(h)||0;a.count(h,b+1)}}},postTimeMetric:function(h,a){if("undefined"!==typeof h&&"undefined"!==typeof a){var b=q.ue;b&&b.count(h,a)}}}});"use strict";y.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});y.register("postEarlyMetric",function(){return null});"use strict";y.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(h,a,b,m){h=h.extend(!0,{},b,m);var p=new a(h);y.register("ImageBlockAPI",function(){return p.api});return p});"use strict";y.when("A","jQuery").execute(function(h,a){h.on("a:image:load:landingImage",function(){q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",
performance.now())});h.loadDynamicImage(a("#landingImage"))});"use strict";y.when("ImageBlockATF","atf").register("ImageBlockAiryLoader",function(h){function a(a){a&&(y.load.js(a),q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",q.parseInt(performance.now())))}function b(a){a&&y.load.css(a)}var m=h.airyConfig;void 0===m?y.when("ImageBlockBTF").execute(function(h){m=h.airyConfig;a(m.jsUrl);b(m.cssUrl);q.performance&&performance.now&&q.ue&&ue.count&&ue.count("WeblabAllocationErrorCount",
(ue.count("WeblabAllocationErrorCount")||0)+1)}):(a(m.jsUrl),b(m.cssUrl))});"use strict";y.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(h,a,b,m,p){var k={};return function(B){var f=this;f.dispatch=function(a,b){var f=k[a];m.isDefined(f)&&h.each(f,function(a,k){k.call(q,b)})};f.register=function(a,b){m.isDefined(k[a])||(k[a]=[]);"function"===typeof b&&k[a].push(b)};f.model=new a(B,f);f.view=new b(B,f,f.model);f.api=new p(B,
f,f.model);f.init=function(){f.model.init();f.view.init()};f.init()}});"use strict";y.when("A","imageBlockUtils").register("ImageBlockModel",function(h,a){function b(b,k,f,h,B){a.isDefined(b)&&(C.type=b);a.isDefined(k)&&(C.index=k);a.isDefined(f)&&(C.thumbnailIndex=f);a.isDefined(h)&&(C.variant=h);a.isDefined(B)&&(C.color=B)}function m(a){b("image",0,0,"MAIN",a||f.landingAsinColor||f.defaultColor)}function p(a){a=a.data;u=h.copy(C);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function k(a){p(a);
a=h.copy(a);a.data=h.copy(C);w.dispatch("updateView",a)}function B(){u=h.copy(C);m(C.color)}var f,w,C={},u={},I,q;return function(a,b){w=b;f=a;w.register("updateSelection",k);w.register("updateModel",p);w.register("resetModel",B);this.init=function(){m()};this.getCurrentItem=function(){return h.copy(C)};this.getPreviousItem=function(){return h.copy(u)};this.setCurrentEvent=function(a){I=a};this.getCurrentEvent=function(){return I};this.setImmersiveViewModalInstance=function(a){q=a};this.getImmersiveViewModalInstance=
function(){return q};this.updateTitle=function(a){f.title=a}}});"use strict";y.when("ImageBlockBTF","postMetric").execute(function(h,a){function b(a,b,B,f,m){function C(a){"click"===a.type&&f.postCountMetric("thumbClick");"click"===a.type&&l.overrideAltImageClickAction?n.dispatch("thumbActionClick",a):n.dispatch("updateSelection",a)}function u(a){l.useClickZoom||n.dispatch("imageClick",a)}function I(a){l.useClickZoom||n.dispatch("imageHover",a)}function P(a){n.dispatch("button360Click",a)}function A(b){!B.isDefined(b)||
"swatchClick"!==b.type&&"updatedData"!==b.type?(D.update(b),"swatchHover"!==b.type&&x.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&f.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):D.render(b.data.color,!1,b.onload)}function H(a){n.dispatch("resize",a)}function L(a){B.selectThumbnail(a,G)}function K(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",
events:["click"]}]})}function v(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"]},{name:"thumbnail",events:["click","hover"]}]});1===h.useIV?y.when("a-modal").execute(function(){K()}):K();l.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],C);a.declarative("thumb-action",["click"],C);a.declarative("main-image-click",["click"],u);a.declarative("main-image-click",["mouseenter",
"mouseleave"],I);a.declarative("button-360-click",["click"],P);b(q).resize(H);q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBMouseEventsReadyTime",performance.now())}function c(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function E(a){var b=x.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var D,l,n,x,G;return function(a,f,h){D=this;l=a;n=f;x=h;G=b("#imageBlock #altImages ul");var d=b("#imageBlock .canvas"),e=b("#main-image-container"),
g;D.subViews=[];for(f=0;f<m.length;f++)D.subViews.push(new m[f](a,h,D,n));D.render=function(a,c,l){var n=0;G.find(".item").remove();a=a||x.getCurrentItem().color;b.each(D.subViews,function(b,g){n=g.render(a,n,d,G,e,c,l)||n});var f=G.find(".a-button-selected").closest(".a-declarative");g=E(f)};D.init=function(){G=b("#imageBlock #altImages ul");var a=G.find(".a-button-selected").closest(".a-declarative"),d=a.data("action"),a=a.data(d)||{};a.color=l.landingAsinColor||l.defaultColor;n.dispatch("updateModel",
{data:a});D.render(a.color,!0);l.isDebug&&q.console&&console.log(l);n.register("updateView",A);n.register("selectThumbnail",L);v()};D.update=function(a){b.each(D.subViews,function(d,b){b.update(a)});l.usePeekHover&&("mouseleave"===a.type?n.dispatch("updateSelection",g):"click"===a.type&&(g=c(a)||g))}}}var m=["A","jQuery","imageBlockUtils","postMetric"].concat(h.views);y.when.apply(y,m).register("ImageBlockView",function(){for(var a=arguments[0],k=arguments[1],h=arguments[2],f=arguments[3],m=[],C=
4,u=arguments.length;C<u;C++)m.push(arguments[C]);return b(a,k,h,f,m)})});"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(h,a,b,m,p,k,B){function f(d,e,c,g){if(!b.isjQueryObjDefined(d.find(".a-button-selected"))){var l=x.getCurrentItem();if(!g||"chromeless-video"!==l.type||!n.autoplayVideo){g=0;"image"===l.type&&(g=Math.max(u(l.color,l.variant),0));var z=e+g;z>=c&&(g=0,z=e);
e=b.getImageHash(l.color,g,n);-1!==e&&(G.dispatch("updateModel",{data:{index:g,thumbnailIndex:z,variant:e.variant,type:"image"}}),e=d.find(".item").get(z),b.selectGivenThumbnail(a(e),d))}}}function w(d,e,c){e=n.colorImages&&n.colorImages[e];var g=d;b.isDefined(e)&&(a.each(e,function(a,e){d<n.maxAlts&&(b.createThumbnail({type:"image",index:a,thumbnailIndex:d,variant:e.variant},e.thumb,M,"imageThumbnail"),d++)}),k.isEnabled&&B.logAltImgRequestPlacedOnThumbnails(a,k,x),f(M,g,d,c));return d}function C(d,
b){if("image"===d.type){var e=a("#image-canvas-caption #canvasCaption"),c,g=n.staticStrings,z=n.colorImages,l=d.color,k=d.index;b&&n.useIV?c=g.clickToExpand:z[l]&&z[l][k].hiRes&&n.useHoverZoom?(c=n.useHoverZoomIpad?g.touchToZoom:n.useClickZoom?g.clickToZoom:g.rollOverToZoom,n.hoverZoomIndicator&&(c="\x3cimg src\x3d'"+n.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+c)):n.useIV&&(c=g.clickToExpand);e.html(c)}}function u(a,d){return b.getIndexForVariant(a,d,n)}function I(d,e){var c="a-dynamic-image";
if(!n.acEnabled){var g;a.each(d.main,function(a,d){b.isDefined(g)||(g=parseFloat(d[1]/d[0])<=parseFloat(n.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});c+=g}var l=b.getMaxDimensionsOfMainImage(d.main,O,n),z=l[0],k=l[1],l=a("\x3cdiv\x3e\x3c/div\x3e"),z={"max-height":z,"max-width":k};l.addClass(c).css(z).attr({"data-old-hires":d.hiRes,"data-a-manual-replacement":"true",onload:e}).data("a-dynamic-image",d.main);return l}function q(a){var d=t.find(".swatchHoverExp");a=I(a);d.find(".imgTagWrapper").html(a);
h.loadImageManually(a);return d}function A(a){var d=O.css("height");null!==d&&a.find(".imgTagWrapper").css("height",d);a.addClass("selected");n.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(n.imgTagWrapperClasses)}function H(a,d){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var e=b.getImageHash(a.color,a.index,n);if(-1===e)return e={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},b.lazyLoadingRequired(a,x,n)?v(a,!1,d):(G.dispatch("updateModel",e),b.showUnavailable(a.color)),
-1;var c=t.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(c)){var c=a.thumbnailIndex,c=t.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+c+" maintain-height"),g=I(e,d);c.find(".placeHolder").replaceWith(g);t.find(".list").append(c);h.loadImageManually(g)}A(c);G.dispatch("loadMagnifier");C(a);n.useIV&&b.isDefined(e.hiRes)&&c.css("cursor","pointer");a.isUserGenerated&&(c=x.getPreviousItem(),g=a.variant,b.isDefined(g)&&c.thumbnailIndex!==
a.thumbnailIndex&&(k.isEnabled&&B.logAltImgRequestServed(k),p.postCountMetric("ImageThumbnailSelectedVariant:"+g),0===g.indexOf("IG")&&(p.postCountMetric("IGImageSelectedVariant:"+g),p.postCountMetric("IGImageSelectedEvent:"+a.interaction))));h.trigger("dp:image-block:update",e)}}function L(a){var d=Math.max(u(a.color,x.getCurrentItem().variant),0),d=b.getImageHash(a.color,d,n);if(-1===d)return b.lazyLoadingRequired(a,x,n)?b.lazyLoadOnHoverEnabled(n)&&(K(".3",!0),b.spinner(t,!0),h.delay(function(){x.getCurrentEvent().data===
a&&v(a,!0)},500)):b.showUnavailable(a.color),-1;var e=q(d);A(e);h.trigger("dp:image-block:update",d)}function K(d,b){b?t.css("opacity",d):a("#imageBlock").css("opacity",d)}function v(a,g,l){d=g;e=l;var k=a.color,f=n.colorToAsin[k];if(f&&f.asin){var z={};z.params={asin:f.asin,productGroupID:n.productGroupID,color:k};z.success=function(z){z?(b.ajaxState(f.asin,"success"),n.colorImages[k]=z.colorImage,b.isDefined(n.spin360ColorEnabled)&&(n.spin360ColorEnabled[k]=z.enable360),k===a.color&&(g&&d?a===x.getCurrentEvent().data&&
(c(a),L(a)):(z={type:"updatedData",data:x.getCurrentItem(),onload:l||e},G.dispatch("updateView",z))),y.register(b.rankedImagesReadyEvent(f.asin))):b.ajaxState(f.asin,"fail")};z.error=function(){b.ajaxState(f.asin,"fail")};z.indicator=b.spinner(t);b.ajaxState(f.asin,void 0)&&"fail"!==b.ajaxState(f.asin,void 0)||(K(".3",g),m.load("/gp/product/features/apparel-main-image/ranked-images.html",z),b.ajaxState(f.asin,"sent"));return n.colorImages&&n.colorImages[k]}}function c(d,e){b.lazyLoadingRequired(d,
x,n)||(a("#imageBlock").css("opacity","1"),t.css("opacity","1"),b.spinner(t,!1),t.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),b.hideUnavailable(),e&&t.find(".list .item").remove())}function E(){var d=t.find(".item .imgTagWrapper"),e=b.getContainerHeight(O,n.holderRatio,n.holderMaxHeight);0<e&&(O.height(e),d.height(e));t.find("img.a-dynamic-image").each(function(){var d=a(this);d.data("a-manual-replacement")&&h.loadDynamicImage(this);var e=d.data("a-dynamic-image"),
e=b.getMaxDimensionsOfMainImage(e,O,n);d.css({"max-height":e[0]+"px","max-width":e[1]+"px"})})}function D(a){C(x.getCurrentItem(),"mouseenter"===a.type)}var l,n,x,G,M,t,O,d,e,g;return function(a,d,e,k){l=this;n=a;x=d;G=k;n.colorImages[n.landingAsinColor]=n.colorImages[n.defaultColor];l.render=function(a,d,e,l,k,f,D){t=e;M=l;O=k;g=w(d,a,f);f||(a=x.getCurrentItem(),b.lazyLoadingRequired(a,x,n)&&G.dispatch("updateModel",{data:{type:"lazy-loaded"}}));c(x.getCurrentItem(),!f);H(x.getCurrentItem(),D);return g};
l.update=function(a){var d=a.data;x.setCurrentEvent(a);"ingress"!==d.type&&c(a.data,!1);"swatchHover"===a.type?d.color===x.getCurrentItem().color?H(x.getCurrentItem()):a.captured||-1===L(d)||(a.captured=!0):"image"===d.type&&(d.interaction=a.type,d.isUserGenerated=!0,"mouseenter"===a.type&&p.postCountMetric("dpcc_imageThumbHovered_"+(d.thumbnailIndex+1)+"_"+g),H(d),n.usePeekHover&&"click"!==a.type||(b.selectGivenThumbnail(a.$declarativeParent,M),"click"===a.type&&(p.postCountMetric("dpcc_imageThumbClicked_total"),
p.postCountMetric("dpcc_imageThumbClicked_"+(d.thumbnailIndex+1)+"_"+g))))};n.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");G.register("imageHover",D);G.register("resize",E)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(h,a,b,m,p,k){function B(a){K?a.css("cursor","url('"+I.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),
a.css("cursor","zoom-in"))}function f(a){var c=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(c))for(var c=c[1].split("_"),k=0;k<c.length;k++){var f=c[k].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(f)&&(a[f[1]]=parseInt(f[2],10))}return a}function w(v,c){function E(){var a;c.useClickZoom?(a=c.offsetInClickZoom,a=[Math.min(1,Math.max(0,J[0]-(A[0]+a))/(A[2]-2*a)),Math.min(1,Math.max(0,J[1]-(A[1]+a))/(A[3]-2*a))]):a=g&&g.updatePosition();if(a&&e&&e.detailSize){var d=[e.detailSize[0]-
e.rect.width,e.detailSize[1]-e.rect.height];h.capabilities.rtl?e.detailImage.get(0).style.right=-(a[0]*d[0])+"px":e.detailImage.get(0).style.left=-(a[0]*d[0])+"px";e.detailImage.get(0).style.top=-(a[1]*d[1])+"px"}}function D(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function l(d){var e=Z?d.originalEvent.touches[0]||d.originalEvent.changedTouches[0]:"";J=Z?[e.pageX,e.pageY]:[d.pageX,d.pageY];if(h.capabilities.rtl){var b=a(q).width();J=Z?[b-e.pageX,e.pageY]:[b-d.pageX,d.pageY]}}
function n(a){Z&&a.preventDefault();l(a);c.useClickZoom?a=[A[0],A[1],A[0]+A[2],A[1]+A[3]]:(a=g?g.offset:v.offsetParent().offset(),a=I.acEnabled?[a.left,a.top,C.width()+a.left,C.height()+a.top]:[u[0]+a.left,u[1]+a.top,u[0]+u[2]+a.left,u[1]+u[3]+a.top]);J[0]<a[0]||J[1]<a[1]||J[0]>=a[2]||J[1]>=a[3]||I.acEnabled&&!D(v)?(c.fadeMagnifier?y||(y=!0,da=setTimeout(function(){x(!0)},500)):c.useClickZoom||x(),F&&(F=!1,clearTimeout(V))):(F||(F=!0,V=setTimeout(function(){m.postCountMetric("dppc_hoverZoomOpened");
p.isEnabled&&k.logHoverZoomRequestServed(p)},1E3)),c.fadeMagnifier&&y&&(y=!1,clearTimeout(da)),E())}function x(d){d&&t.suppressMagnifier(!0);if(R&&(e&&e.hide(),g&&(g.destroy(),g=null),R=!1,Z?(v.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),w(),d))v.one("click.magnifier touchstart.magnifier",function(a){G(a,!0)})}function G(d,b){b&&t.suppressMagnifier(!1);if(!R&&
!z&&(0===fa&&(m.postCountMetric("dppc_hoverTime",new Date-(q.ue&&q.ue.t0||0)),fa=1),H[ba]||(m.postCountMetric("dppc_hoverMain"),H[ba]=1),u=[v.position().left,v.position().top,v.width(),v.height()],ba&&(l(d),e?e.refit().show():e=new L,c.useClickZoom||(g=g||new P),A=e.getWindowSize(),E()),R=!0,Z?(v.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",n).bind("touchend.magnifier",x),a(document).trigger("engaged.magnifier")):(I.acEnabled?C.unbind("mousemove.magnifier"):v.unbind("mousemove.magnifier"),
a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",n)),b)){var k=a("#zoomWindow");if(0<k.length)k.one("click.magnifier touchend.magnifier",function(a){x(!0)})}}function w(){c.useHoverZoom&&(Z?v.bind("touchstart.magnifier touchmove.magnifier",G):I.acEnabled?D(v)&&C.bind("mousemove.magnifier",G):v.bind("mousemove.magnifier",G))}var t=this,C=v.offsetParent(),d={detailImageUrl:v.attr("data-old-hires"),location:"over",locationElement:v,prelaod:"ready",zIndex:50,offsetInClickZoom:50};c=
a.extend(d,c);c.adjustment=[10,0,-10,0];var e=null,g=null,J=null,u=null,A=null,U={"null":1,"":1,undefined:1},R=!1,z=!1,ba=c.detailImageUrl,Z=c.useHoverZoomIpad||0,fa=0,H={},P=function(){function d(a){var b=Math.round(Math.min(v.width(),e.rect.width/a));a=Math.round(Math.min(v.height(),e.rect.height/a));f.css({width:b,height:a});g=[b,a]}var b=this,g=[0,0],l=(e.detailSize&&e.detailSize[0]||5E8)/u[2],k=(e.detailSize&&e.detailSize[1]||5E8)/u[3],l=k>l?k:l;a("#magnifierLens").remove();var f=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});
c.generalImageUrls.zoomLensBackground&&f.css({backgroundImage:"url("+c.generalImageUrls.zoomLensBackground+")"});I.showMagnifierOnHover?B(f):f.css("cursor","pointer");b.updatePosition=function(){var a=[u[2]-g[0],u[3]-g[1]],d=0>=a[0]?.5:Math.max(0,Math.min(1,(J[0]-g[0]/2-u[0]-b.offset.left)/a[0])),e=0>=a[1]?.5:Math.max(0,Math.min(1,(J[1]-g[1]/2-u[1]-b.offset.top)/a[1])),c=u[0]+Math.round(d*a[0]),a=u[1]+Math.round(e*a[1]);f.get(0).style.left=c+"px";f.get(0).style.top=a+"px";return[d,e]};b.destroy=function(){f.remove()};
b.offset=v.offsetParent().offset();d(l);b.updatePosition();f.appendTo(v.parent());e.detailImage[0].complete||e.detailImage.load(function(){var a=e.detailImage.width()/u[2];d(a);b.updatePosition()})};P.preload=function(){t.preload(c.generalImageUrls.lensBackgroundUrl)};var L=function(){function d(){var e={};if("over"===c.location){var e=c.useClickZoom,k={},f=a("#leftCol"),n=a("#centerCol"),D=a("#rightCol"),h=a("#hover-zoom-end"),E=a("#actionPanelContainer"),B=b.isjQueryObjDefined(f)?f.outerHeight():
n.outerHeight();k.top=b.isjQueryObjDefined(f)?f.offset().top:n.offset().top;k.bottom=B+k.top;k.right=b.isjQueryObjDefined(D)?D.offset().left:E.offset().left;k.left=e?0:f.offset().left+f.outerWidth();b.isjQueryObjDefined(h)&&h.offset().top>k.bottom&&(k.bottom=h.offset().top);e=k}else"right"===c.location&&(e=v.offset(),e={left:e.left+v.outerWidth(),top:e.top,right:e.left+v.outerWidth()+400,bottom:e.top+400});c.minHeightElement&&(e.bottom=Math.max(e.bottom,e.top+a(c.minHeightElement).outerHeight()));
e.bottom=Math.min(e.bottom,a(q).scrollTop()+a(q).height());e.left+=l[0];e.top+=l[1];e.right+=l[2];e.bottom+=l[3];e.width=e.right-e.left;e.height=e.bottom-e.top;c.enhancedHoverOverlay&&b.isDefined(q.pageXOffset)&&(k=a(q).width(),e.width=k-e.left+q.pageXOffset-18,e.height-=14);z.css({left:e.left,top:e.top,width:e.width,height:e.height});g.rect=e;return g}function e(a){var d=new Image;g.detailSize=[0,0];d.onload=function(){g.detailSize=[d.width,d.height];E()};d.src=a.attr("src");if(0<d.width&&0<d.height)g.detailSize=
[d.width,d.height];else if(c.detailImageSize)g.detailSize=c.detailImageSize;else{a=f(d.src);var b=u[2]/u[3];a.SS||a.AA?(a=a.SS||a.AA,g.detailSize=[a,a]):a.SX?g.detailSize=[a.SX,Math.round(a.SX/b)]:a.SY?g.detailSize=[Math.round(a.SY*b),a.SY]:a.SL&&(g.detailSize=1<=b?[a.SL,Math.round(a.SL/b)]:[Math.round(a.SL*b),a.SL])}}var g=this,l=c.adjustment;a("#zoomWindow").remove();var k={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:c.zIndex};c.enhancedHoverOverlay&&(k.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",
k.border="1px solid #949494",k.borderColor="rgb(148,148,148)");var z=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(k);c.fadeMagnifier&&z.fadeIn(200);c.useClickZoom&&(K?z.css("cursor",'url("'+c.zoomOutIcon+'"), auto'):(z.css("cursor","-webkit-zoom-out"),z.css("cursor","-moz-zoom-out"),z.css("cursor","zoom-out")));g.updateImage=function(d){d=a("\x3cimg id\x3d'detailImg' src\x3d'"+d+"'/\x3e").css("position","absolute");g.detailImage&&g.detailImage.remove();z.append(d);a(document).trigger("updated.magnifier");
g.detailImage=d;e(g.detailImage)};g.refit=function(){d();e(g.detailImage);return g};c.fadeMagnifier?(g.show=function(){z.fadeIn(200);return g},g.hide=function(){z.fadeOut(200);return g}):(g.show=function(){z.show();return g},g.hide=function(){z.hide();return g});g.destroy=function(){z.remove();return g};g.getWindowSize=function(){return[g.rect.left,g.rect.top,g.rect.width,g.rect.height]};g.updateImage(ba);d();z.appendTo(document.body)},y=!1,da,F=!1,V;t.preload=function(d){d=a.makeArray(d);for(var e=
d.length,b=0;b<e;b++)d[b]instanceof Array?t.preload(d[b]):"string"===typeof d[b]&&d[b]&&!U[d[b]]&&(U[d[b]]=new Image,U[d[b]].src=d[b])};t.changeImage=function(d,b){R&&x();ba=b;v.attr("src",d);t.preload(d);u=[v.position().left,v.position().top,v.width(),v.height()];b&&("immediately"===c.preload?t.preload(b,!0):a(q).ready(function(){t.preload(b)}),e?e.updateImage(b):v.attr("data-old-hires",b))};t.destroy=function(){I.acEnabled?C.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):
v.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");g&&g.destroy();g=null;e&&e.destroy();e=null};t.detailImage=function(){return e.detailImage};t.suppressMagnifier=function(a){z=a};t.isEngaged=function(){return R};t.engageMagnifier=G;t.disengageMagnifier=x;v[0].complete?w():v.one("load",w);t.preload(v.attr("src"));q.performance&&performance.now&&q.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(c.preload){var ja=
c.detailImageUrl,d=function(){t.preload(ja,!0);c.useClickZoom||P.preload()},W=c.preload;W.constructor!==Array&&(W=[W]);for(var r=0;r<W.length;r++)if("immediately"===W[r])d();else if(a(q)[W[r]])a(q)[W[r]](d);else a(q).bind(W[r],d)}return t}function C(){if(I.useHoverZoom){var f={adjustment:[0,0,1,1],generalImageUrls:I.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:I.useHoverZoomIpad,useHoverZoom:I.useHoverZoom,useClickZoom:I.useClickZoom,fadeMagnifier:I.fadeMagnifier,
zoomOutIcon:I.staticImages.zoomOutCur,enhancedHoverOverlay:I.enhancedHoverOverlay||I.atfEnhancedHoverOverlay};H&&(H.destroy(),H=void 0);var c=L.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(c)?I.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(a){H=new w(c,f);H.engageMagnifier(a,!0)}),K?c.css("cursor",'url("'+I.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor",
"zoom-in"))):H=new w(c,f):p.isEnabled&&k.logHoverZoomApplicability(a,p)}}var u,I,P,A,H,L,K=navigator.userAgent.match(/msie|trident/i);return function(a,b,k,f){u=this;I=a;P=b;p.refToModel=P;A=f;u.render=function(a,b,c,k,f,D){L=c;H&&(H.destroy(),H=void 0)};u.update=function(a){};A.register("loadMagnifier",C);A.register("resize",C)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(h,a,b,m){function p(a,k,h){a=(a=h?h:b.getColorFromState(k.getState().hovered_variations,
f))&&""!==a?a:f.defaultColor;C.dispatch("updateView",{type:"swatchHover",data:{color:a}});m.postCountMetric("swatchHover")}function k(a,k,h,B){a=(a=B?B:b.getColorFromState(k.getState().selected_variations,f))&&""!==a?a:f.defaultColor;a===w.getCurrentItem().color?"function"===typeof h&&h():(C.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:h}),m.postCountMetric("swatchClick"))}var B,f,w,C;return function(a,b,m,A){B=this;f=a;w=b;C=A;h.on("image-block-twister-swatch-hover",p);h.on("image-block-twister-swatch-click",
k);B.render=function(a,b,k,f,c){};B.update=function(a){}}});"use strict";y.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(h,a,b,m,p,k,B){function f(d,e,b,g){!c.autoplayVideo||Q||c.useChromelessVideoPlayer?!m.isjQueryObjDefined(d.find(".a-button-selected"))&&(b=E.getCurrentItem(),!g||c.prioritizeVideos||"chromeless-video"===b.type&&c.autoplayVideo)&&(g=m.getVideoHash(b.color,0,c),-1!==g&&(e+=0,D.dispatch("updateModel",
{data:{index:0,thumbnailIndex:e,variant:g.variant,type:c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=d.find(".item").get(e),m.selectGivenThumbnail(a(e),d))):(m.selectGivenThumbnail(d.find("img:last"),d),m.fadeToThumbnail(d.find("img").length-1,G,d))}function w(a){var d=E.getCurrentItem().color;if(c.useChildVideos&&!c.colorToVideo[d]){var e=function(){if(a){c.colorToVideo[d]=a;var e={type:"updatedData",data:E.getCurrentItem()};D.dispatch("updateView",e)}};c.lazyLoadExperienceDisabled?
e():y.when(m.rankedImagesReadyEvent(c.colorToAsin[d].asin)).execute(function(){e()})}}function C(a){if(!c.useChildVideos)return m.lazyLoadingRequired(E.getCurrentItem(),E,c)?void 0:c.videos;if(c.colorToVideo[a])return c.colorToVideo[a];var d=c.colorToAsin[a];if(d&&d.asin){var e={};e.params={asin:d.asin,productGroupID:c.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:c.useChromelessVideoPlayer,isUDP:c.isUDP};c.isDPXFeatureEnabled||(e.success=function(a){w(a)},p.load("/gp/product/features/apparel-main-image/videos.html",
e));return c.colorToVideo&&c.colorToVideo[a]}}function u(){D.dispatch("selectThumbnail",m.useTabbedImmersiveView(c)?1:0)}function I(d,e,g,c){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:d[0],streamingUrls:e.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=m.isjQueryObjDefined(d.find("video"))?"HTML5":"FLASH";k.postCountMetric("dppc_chromelessVideo:"+
a)},playing:function(){d.parent().css("z-index",8)},videounsupported:function(){u();k.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){u();k.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){t.seek(0)}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(e,b,g){e=g.durationSeconds-g.playheadTimeSeconds;d.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*e,.1,function(){d.parent().css({"background-color":"transparent",
"z-index":-1});u();a(this).show().css("opacity",1)})}}]})}function q(e){if("chromeful-video"===e.type||"chromeless-video"===e.type){var b=m.getVideoHash(e.color,e.index,c);if(-1===b)return-1;if("chromeful-video"===e.type){e=G.width()/G.height();var k=parseInt(b.videoWidth,10),f=parseInt(b.videoHeight,10);m.updateAspectRatio(e,k,f,n);t?(t.show(),m.loadMediaIntoAiry(t,b,O,c.tabletWeb)):t=c.tabletWeb?g:m.createAiryInstanceForChromeful(n,b,O,null,c.autoplayVideo,G,x,l);b:if(m.useTabbedImmersiveView(c)){if(1<
m.getVideosCount(E.getCurrentItem().color,c)){if(m.isDefined(M)){x.show();break b}M=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(c.staticStrings.watchMoreVideos);x.find("#videoCaption").append(M);h.declarative.create(M,"videoIngressClick",d)}m.playVideoInImmersiveView(c,E.getCurrentItem().color)&&(h.declarative.create(n,"videoIngressClick",d),n.attr&&n.attr("data-ux-click",""),n.children().css("z-index","-1"),n.css("display","inline-block"))}else x.find("#videoCaption").text(c.staticStrings.playVideo),
x.show();b=t;c.autoplayVideo&&b&&!Q&&(m.toggleVideoCaption(x),b.setVolume(0),b.show(),b.play(),Q=!0)}else t?(t.show(),m.loadMediaIntoAiry(t,b,O,c.tabletWeb),t.play(),x.show()):(t=I(n,b,O))&&t.play()}}function A(e,b,g){var n=C(b);b=e;m.isDefined(n)&&0<n.length&&c.alwaysIncludeVideo&&e===c.maxAlts&&(l.find(".item:last").remove(),e--);m.isDefined(n)&&(a.each(n,function(b,g){if(e<c.maxAlts){var f=c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",z={type:f,index:b,thumbnailIndex:e,variant:g.variant};
d={type:"video-ingress",index:b,thumbnailIndex:e,variant:g.variant};m.useTabbedImmersiveView(c)&&("chromeful-video"===f&&(T+=" videoBlockIngress  videoBlockDarkIngress",g.thumb=g.thumb.replace("_PKmb-play-button-overlay-thumb","")),c.altsOnLeft||(T+=" a-align-top"));m.createThumbnail(z,g.thumb,l,T);if(2===c.dp60VideoPosition){var h=l,z=c.dp60VideoPosition;if(0!==z){var D=h.children(".imageThumbnail"),h=h.children(".videoBlockIngress");D&&h&&D[z-1]&&a(D[z-1]).before(h[0])}}m.useTabbedImmersiveView(c)&&
(H(l.find(".videoBlockIngress img"),c.videoIngressATFSlateThumbURL),z=1<n.length?"multiple-videos":"one-video",(D=1<n.length?n.length+" "+c.staticStrings.multipleVideos:c.staticStrings.singleVideo)&&l.find(".videoBlockIngress").append(l.find("#videoCount_template").clone().text(D).attr("id","videoCount")).addClass(z));J||(J=!0,k.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));e++}if(m.useTabbedImmersiveView(c))return!1}),f(l,b,e,g));return e}
function H(a,d){var e=a.attr("src");if(e&&d){a.attr("src",d);var b=new Image;b.onload=function(d){a.attr("src",e)};b.src=e}}function L(a){t&&t.pause();a.data=d;a.clickTimeStamp=a.$event.timeStamp;var e="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";D.dispatch("imageClick",a);k.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);k.postCountMetric(e)}function K(a){g=a.airy;g.hide=function(){g.pause();h.$("#main-video-container").find(".vse-airy-container").hide()};g.show=
function(){h.$("#main-video-container").find(".vse-airy-container").show();g.play()};g.getMediaSourceInfo=function(){return m.getMediaSourceInfo()}}var v,c,E,D,l,n,x,G,M,t,O,d,e,g,J=!1,Q=!1,T="videoThumbnail";return function(b,g,f,p){v=this;c=b;E=g;D=p;O=c.airyConfig;c.colorToVideo={};c.colorToVideo[c.landingAsinColor]=c.colorToVideo[c.defaultColor]=c.videos;v.render=function(d,b,g,k,f,z){l=k;n=f.find("#main-video-container");x=n.parent().find("#video-canvas-caption");G=a("#main-image-container");
c.useChromelessVideoPlayer||n.addClass("chromeful-container");e=A(b,d,z);q(E.getCurrentItem());m.useTabbedImmersiveView(c)&&h.declarative("videoIngressClick",["click"],L);d=E.getCurrentItem().color;b=m.getVideoHash(d,0,c);-1!==b&&c.tabletWeb&&(d=m.getNilgiriServiceAjaxRequest(c,d,b),B.get(h,"#main-video-container",d,function(){h.$("#main-video-container").find(".vse-airy-container").hide()},function(){h.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return e};v.update=function(a){var b=
a.data;"ingress"!==b.type&&t&&(t.hide(),n.parent().css("z-index",-1),x.hide());if("swatchHover"===a.type)b.color===E.getCurrentItem().color?q(E.getCurrentItem()):a.captured||m.lazyLoadingRequired(b,E,c)&&!m.lazyLoadOnHoverEnabled(c)&&q(E.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&k.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+e),q(b),c.usePeekHover&&"click"!==a.type||(m.selectGivenThumbnail(a.$declarativeParent,l),
"click"===a.type&&m.useTabbedImmersiveView(c)&&(k.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+e),d.action="videoIngressClick",d.clickTimeStamp=a.$event.timeStamp,d.$event=a.$event,d.$currentTarget=a.$currentTarget,D.dispatch("videoIngressClick",d),k.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(c.isDPXFeatureEnabled)h.on("triggerVideoAjax",w);h.on("vseAiry",K)}});"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric",
"postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(h,a,b,m,p,k,B,f){function w(a){return a.hiRes||a.large||a.main[a.main.length-1]}function C(){r.find("#ivTitle").click(function(){W.hide()})}function u(){N=Oa?{type:"360-spin"}:V.getCurrentItem()}function I(){var a=r.find("#ivStage"),d=W.$container.find(".a-popover-wrapper"),e=d.find(".a-popover-inner"),d=d.height()-f.getDimension(e,"padding-top")-f.getDimension(e,"padding-bottom");r.css("height",d);var e=
r.find("#ivTitle").outerHeight(!0),b=r.find("#ivVariationSelection").outerHeight(!0),g=r.find("#ivMediaSelection").outerHeight(!0),c=r.find("#ivThumbs"),k=f.getDimension(c,"margin-top")+f.getDimension(c,"margin-bottom");c.css("height",d-e-b-g-k);r.find("#ivLargeImage").css("height",d);a.css("width",r.width()-f.getDimension(r,"padding-left")-f.getDimension(r,"padding-right")-r.find("#ivThumbColumn").width()-f.getDimension(a,"margin-left")-f.getDimension(a,"margin-right"))}function P(){r.find("#ivMediaSelect").change(function(){var d=
a(this).val();"all"===d?(r.find("#ivVideoList").hide(),r.find("#ivThumbs").show(),r.find(".ivThumbVideo").show(),"chromeful-video"===N.type&&r.find("#ivVideo_"+N.index).click()):"images"===d?(r.find("#ivVideoList").hide(),r.find("#ivThumbs").show(),r.find(".ivThumbVideo").hide(),"chromeful-video"===N.type&&(0===aa&&0===X?r.find("#iv360").click():0===aa?r.find("#ivHeroImage_0").click():r.find("#ivImage_0").click())):"videos"===d&&(r.find("#ivVideoList").show(),r.find("#ivThumbs").hide(),"chromeful-video"!==
N.type?r.find("#ivVideoList_0").click():r.find("#ivVideoList_"+N.index).click())})}function A(){var a=r.find("#ivStage").find("#ivLargeImage"),d=a.width(),e=a.height(),b=a.find(".fullscreen");b.removeAttr("style");var g=b.width(),c=b.height();0<b.length&&(b[0].naturalWidth&&(g=b[0].naturalWidth),b[0].naturalHeight&&(c=b[0].naturalHeight));a.css("cursor","auto");var g=0===g?1:g,c=0===c?1:c,k=Math.min(d/g,e/c),f=c*k,l=g*k;1>k?(Pa?a.css("cursor","url('"+F.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;g=Math.min(l,g);c=Math.min(f-20,c);b.css({"margin-top":(e-c)/2,"margin-left":(d-g)/2,height:c,width:g});a.css("visibility","visible");Aa=!1}function H(a){var d=r.find("#ivLargeImage");d.css("visibility","hidden");d.empty();f.animateStageIn(d);d.append(a);A()}function L(){Y&&Y.pause();r.find("#ivLarge360").css("display","none");r.find("#ivLargeVideo").css("display","none");r.find("#ivLargeImage").css("display",
"none");n()}function K(d){L();r.find("#ivLargeImage").css("display","block");var e;"hero-image"===d?b.isDefined(ca)&&(e=w(ca[N.index])):b.isDefined(ka)&&(e=w(ka[N.index]));if(b.isDefined(e)){r.find(".fullscreen").remove();var g=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),c=r.find("#ivLargeImage");f.animateStageOut(c,function(){g.load(function(){H(g)});if(g[0].complete)H(g);else{c.empty();var d=(c.height()-104)/2,e=(c.width()-80)/2;a("\x3cimg\x3e").attr("src",F.staticImages.spinner).css({position:"relative",
top:d+"px",left:e+"px"}).appendTo(c)}})}}function v(){var a=parseInt(N.index,10)+1;a>=la.length||r.find("#ivVideo_"+a).click()}function c(){var a;b.isDefined(la)&&(a=la[N.index]);if(b.isDefined(a)){L();var d=r.find("#ivLargeVideo").css("display","block");Y?(Y.isDetached()&&Y.attach(d[0]),b.loadMediaIntoAiry(Y,a,wa,F.tabletWeb),Y.show()):(Y=b.createAiryInstanceForChromeful(d,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&Y.bind("ended",v));Y.play({isAsync:!0})}}function E(){u();var a;a="hero-image"===
N.type?r.find("#ivHeroImage_"+N.index):"image"===N.type?r.find("#ivImage_"+N.index):"chromeful-video"===N.type||"chromeless-video"===N.type?r.find("#ivVideo_"+N.index):"360-spin"===N.type?r.find("#iv360"):b.isDefined(ca)?r.find("#ivHeroImage_"+N.index):r.find("#ivImage_"+N.index);b.isjQueryObjDefined(a)||(a=r.find("#ivImage_0"));D(a)}function D(a){r.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(N.type="chromeful-video",N.index=a.attr("id").split("_")[1],
c()):a.hasClass("ivHeroImage")?(N.type="hero-image",N.index=a.attr("id").split("_")[1],K(N.type)):a.hasClass("iv360Image")?(N.type="360-spin",N.index=0,l()):(N.type="image",N.index=a.attr("id").split("_")[1],K(N.type))}function l(){L();r.find("#ivLarge360").css("display","block");O();var a=r.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});f.animateStageIn(a)},200);G();p.postCountMetric("dppc_click360");ta=Date.now()}function n(){0<ta&&(x("dppc_duration360",Date.now()-
ta),ta=0)}function x(a,d){q.ue&&q.ue.count(a,d)}function G(){if(0<pa){var a=r.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function M(d,e){if(pa<d.length){var b=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:sa+"px"});b.hide();e.append(b);b.get(0).onload=function(){e.closest(document.documentElement).length&&(pa++,1===pa&&(G(),0<ta&&x("dppc_loadTime360",Date.now()-ta)),0<Ga&&x("dppc_perSpriteloadTime360",Date.now()-Ga),r.find("#iv360Spinner").hide(),
b.show(),xa=5*S.imageLocations[Math.floor(ya/S.imageLocations[0].length)][ya%S.imageLocations[0].length],M(d,e))};b.attr("src",d[pa].replace(/(\._SP)\d+(,)\d+/,"$1"+ua+"$2"+va));Ga=Date.now()}}function t(a){if(b.isDefined(S.spriteWidthSizes)&&0<S.spriteWidthSizes.length){var d=S.spriteWidthSizes,e=d.length,g=d[0],c=d[e-1];if(a<=g)return g;if(a>c)return c;for(g=0;g<e;g++)if(a>d[g]&&a<=d[g+1])return d[g+1]}else return a}function O(){var e=r.find("#ivLarge360");e.children("#image-360-sprites").length||
(e.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),e.css({"margin-left":0,"margin-top":0,width:e.parent().width(),height:e.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",F.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(e),Ha=!0,d())}function d(){if(b.isDefined(S.spriteURLs)&&
b.isDefined(r)&&Ha&&!Ia){var d=r.find("#ivLarge360"),c=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(S.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",S.staticImages.hint360).appendTo(c);a("\x3cdiv\x3e").css({"text-align":"center"}).text(F.staticStrings.dragToSpin).appendTo(c);c.appendTo(d);var c=S.imageWidth,k=S.imageHeight,f=d.parent().width(),l=d.parent().height(),
n=0,z=0;c/k>f/l?(ua=t(f),va=Math.round(k/c*ua),na=Math.ceil(f),sa=Math.ceil(va/ua*f),z=(l-sa)/2):(va=t(l),ua=Math.round(c/k*va),sa=Math.ceil(l),na=Math.ceil(ua/va*l),n=(f-na)/2);d.css({"margin-left":n,"margin-top":z,width:na+"px",height:sa+"px",overflow:"hidden",position:"relative"});d.children("#image-360-sprites").css("width",6*na+"px");M(S.spriteURLs,r.find("#image-360-sprites"),0);c=r.find("#ivLarge360");c.bind("mousedown",Q);c.bind("touchstart",e);c.bind("touchmove",g);c.bind("touchend",J);a(document).bind("mousemove",
T);a(document).bind("mouseup",U);b.isDefined(F.staticImages.grab)&&d.css("cursor","url('"+F.staticImages.grab+"'), auto");Ia=!0}}function e(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function g(a){Ba&&(R(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function J(a){Ba&&(Ba=!1)}function Q(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(F.staticImages.grabbing)&&(a=r.find("#ivLarge360"),a.css("cursor","url('"+F.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+F.staticImages.grabbing+"'), auto"));return!1}function T(a){Ca&&(R(a.originalEvent.clientX-Ka),Ka=a.originalEvent.clientX)}function U(a){Ca&&(Ca=!1,b.isDefined(F.staticImages.grab)&&(a=r.find("#ivLarge360"),a.css("cursor","url('"+F.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function R(a){for(a=xa-=a/na*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var d;a=360;for(var e=0;e<pa;e++)for(var g=0;g<S.imageLocations[e].length;g++){var c=Math.abs(xa-5*S.imageLocations[e][g]);
c<a&&(a=c,d=e*S.imageLocations[0].length+g)}d!==ya&&(a=Math.floor(d/S.imageLocations[0].length),a!==Math.floor(ya/S.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),e=r.find("#image-360-sprites").children(),La.drawImage(e[a],0,0)),a=r.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=d;a=d%S.imageLocations[0].length*-1*na;d=-1*Math.floor(d/S.imageLocations[0].length)*sa;e=r.find("#ivLarge360").children("#image-360-sprites");
e.css("-webkit-transform","translate3d("+a+"px, "+d+"px, 0)");e.css("transform","translate3d("+a+"px, "+d+"px, 0)")}function z(){r.delegate(".ivThumb","click",function(){var d=a(this);D(d)});r.delegate(".ivThumbVideoListOuter","click",function(){r.find(".ivThumbVideoListOuter").removeClass("selected");var d=a(this);d.addClass("selected");N.type="chromeful-video";N.index=d.attr("id").split("_")[1];c()})}function ba(){Y&&!Y.isDetached()&&(wa.volume=Y.getVolume(),Y.detach(),!document.all||q.atob||document.addEventListener||
(Y=null));r.find("#ivLargeImage").empty();n()}function Z(a,d){return 0<d?d/2:Math.min(0,Math.max(d,a))}function fa(d){var e=qa.left-(d.pageX-Da[0])*Ea;h.capabilities.rtl&&(e=qa.left-(a(q).width()-d.pageX-Da[0])*Ea);d=qa.top-(d.pageY-Da[1])*Ea;e=Z(e,Fa.left);d=Z(d,Fa.top);r.find(".fullscreen").css({left:e,top:d})}function ga(){r.delegate("#ivLargeImage","click",function(a){if(Aa)A();else if(za){r.find(".fullscreen").removeAttr("style");if(za){var d=r.find("#ivLargeImage"),e=d.find(".fullscreen");Pa?
d.css("cursor","url('"+F.staticImages.zoomOut+"'), auto"):(d.css("cursor","-webkit-zoom-out"),d.css("cursor","-moz-zoom-out"),d.css("cursor","zoom-out"));Aa=!0;var b=r.find("#ivLargeImage");Fa.left=b.width()-e.width();Fa.top=b.height()-e.height();var b=d.height()/2,g=d.width()/2;Da=[d.offset().left+g,d.offset().top+b];qa.top=b-e.height()/2;qa.left=g-e.width()/2;e.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(e.height()/d.height(),e.width()/d.width())}fa(a)}});r.delegate("#ivLargeImage",
"mousemove",function(a){Aa&&fa(a)})}function ha(d){if(b.isImmersiveViewEnabled(F,V.getCurrentItem().color))if(Ma){var e=d.$event.originalEvent;e.acknowledge&&e.acknowledge(d.$currentTarget[0]);Oa=b.isDefined(d)&&"button-360-click"===d.action;k.isEnabled&&B.logImmersiveViewRequestServed(k);p.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(W))W.show();else{d=a("#auiImmersiveViewDiv");var e=a(q).height()-150,g=a(q).width()-75;W=Ma.create(d,{name:"immersiveView",activate:"onclick",width:g,
height:e,popoverLabel:"ImmersiveView",hideHeader:!0});d.click()}if(Na){r=a("#ivMain");d=V.getCurrentItem().color;ka=F.colorImages[d];ca=F.heroImage[d];la=F.useChildVideos?F.colorToVideo[d]:F.videos;ra=ea()&&F.spin360ColorEnabled[d];S=ea()?F.spin360ColorData[d]:void 0;u();ia=X=oa=aa=0;b.isDefined(ca)&&(X=ca.length);b.isDefined(ka)&&(aa=ka.length);b.isDefined(la)&&(oa=la.length);ra&&(ia=1);f.populateTitle(r.find("#ivTitle"),45,F);f.populateVariationSelection(r.find("#ivVariationSelection"));d=r.find("#ivMediaSelect");
0===aa+ia||0===oa?(d.parent().hide(),r.find("#ivThumbs").addClass("noMediaSelection")):(d.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(F.staticStrings.allMedia+" ("+(X+aa+ia+oa)+")").appendTo(d),a("\x3coption/\x3e").attr("value","images").text(F.staticStrings.images+" ("+(X+aa+ia)+")").appendTo(d),a("\x3coption/\x3e").attr("value","videos").text(F.staticStrings.videos+" ("+oa+")").appendTo(d),d.parent().show(),d.val("all"));d=r.find("#ivThumbs");d.find(".ivRow").not(".placeholder").remove();
for(var e=X+aa+oa+ia,c=g=0;g<e;)for(var l=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),n=0;3>n&&g<e;n++,g++,c++)if(c<X){var z=ca[g].thumb,D=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(l);D.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(z)+'") center no-repeat')}else if(c>=X&&c<aa+X)z=ka[g-X].thumb,D=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(g-X)).appendTo(l),D.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(z)+'") center no-repeat');else if(c>=X+aa&&c<aa+X+ia)D=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(l),D.find(".ivThumbImage").css("background",'url("'+(b.isDefined(F.staticImages.icon360)?f.getResizedThumbnailURL(F.staticImages.icon360,!0):"")+'") center no-repeat');else if(z=la[g-aa-X-ia],D=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(g-aa-X-ia)).appendTo(l),D.find(".ivThumbImage").css("background",'url("'+z.thumbUrl+'") center no-repeat'),b.isDefined(z)){var E={position:"triggerTop"},x=r.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");x.find(".ivVideoPopoverTitle").text(z.title);x.find(".ivVideoPopoverDuration").text(z.durationTimestamp);E.inlineContent=x[0];h.declarative.create(D,"a-tooltip",E)}d=r.find("#ivVideoList");d.find(".ivThumbVideoListOuter").not(".placeholder").remove();
e=d.find(".placeholder");for(g=0;g<oa;g++)c=la[g],l=e.clone().removeClass("placeholder").appendTo(d),l.attr("id","ivVideoList_"+g),l.find(".ivThumbImage").css("background",'url("'+c.thumbUrl+'") center no-repeat'),l.find(".ivThumbTitle").text(c.title),l.find(".ivThumbDuration").text(c.durationTimestamp);r.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=F.airyConfig;Na=!1;Qa()}}else q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||
0)+1);else p.postCountMetric("immersiveViewNotExistsClickCount")}function ma(a){var e=F.colorToAsin[a],g={},c=500;if(e&&e.asin){g.params={asin:e.asin};var k="360"+e.asin,f=Date.now();g.success=function(e){x("dppc_asyncRequestTime360",Date.now()-f);e&&b.isDefined(e.spin360.spin360Model)?(b.ajaxState(k,"success"),F.spin360ColorData[a]=e.spin360.spin360Model,a===V.getCurrentItem().color&&(S=F.spin360ColorData[a],d())):g.error()};g.error=function(){p.postCountMetric("dppc_asyncFailed360");x("dppc_asyncRequestTime360",
Date.now()-f);c*=2;16E3>=c?setTimeout(function(){f=Date.now();m.load("/gp/product/features/apparel-main-image/360.html",g)},c):b.ajaxState(k,"fail")};b.ajaxState(k)&&"fail"!==b.ajaxState(k)||(m.load("/gp/product/features/apparel-main-image/360.html",g),b.ajaxState(k,"sent"))}}function ea(){return b.isDefined(F.spin360ConfigEnabled)&&F.spin360ConfigEnabled}var da,F,V,ja,W,r,ca,ka,la,X,aa,oa,ia,N,Y,wa,S,ra,na,sa,va,ua,Ka,Ja,Oa=!1,Ha=!1,Ia=!1,xa=0,ya=0,ta=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Pa=navigator.userAgent.match(/msie|trident/i),
Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;y.when("a-modal").execute(function(a){Ma=a});var Qa=h.once(function(){P();z();ga();h.on("a:popover:afterUpdatePosition:immersiveView",I);h.on("a:popover:afterShow:immersiveView",E);h.on("a:popover:afterHide:immersiveView",ba);C()});return function(d,e,g,c){da=this;F=d;V=e;k.refToModel=V;ja=c;ea()&&(F.spin360ColorData[F.landingAsinColor]=F.spin360ColorData[F.defaultColor],F.spin360ColorEnabled[F.landingAsinColor]=F.spin360ColorEnabled[F.defaultColor]);b.isDefined(F.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",f.addStyleCodeToURL(F.staticImages.icon360,"_FMpng_RI_"));da.render=function(a,d,e,g,c,k){Na=!0;ea()&&F.spin360ColorEnabled[a]&&!b.isDefined(F.spin360ColorData[a])&&(F.spin360ColorData[a]={},ma(a));b.isImmersiveViewEnabled(F,V.getCurrentItem().color)&&ea()&&F.spin360ColorEnabled[a]&&(d===F.maxAlts&&(a=g.find(".item.imageThumbnail"),e=g.find(".item.videoThumbnail"),b.isDefined(e)&&1<e.length?e.last().remove():a.last().remove(),
d--),a=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),h.declarative.create(a,"button-360-click"),g.append(a),d++,p.postCountMetric("dppc_display360"));return d};da.update=function(a){};b.isImmersiveViewEnabled(F,V.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");ja.register("imageClick",ha);ja.register("button360Click",ha)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric",
"postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(h,a,b,m,p,k,B){function f(){var b=P.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-B.getDimension(c,"padding-top")-B.getDimension(c,"padding-bottom");a("#iv-tab-view-container").css("height",b);L=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<L?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),
c=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=c):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",b);h.trigger("dp:image-block:immersive-view:resize")}function w(){h.trigger("dp:image-block:immersive-view:reset")}function C(f){if(b.isImmersiveViewEnabled(I,P.getCurrentItem().color))if(v){var l=f.$event.originalEvent;l.acknowledge&&l.acknowledge(f.$currentTarget[0]);p.isEnabled&&k.logImmersiveViewRequestServed(p);
m.postCountMetric("dppc_immersiveViewOpened");b.isDefined(f)&&("button-360-click"===f.action?a("#iv360TabHeading").click():"videoIngressClick"===f.action?(K=f.clickTimeStamp,a("#ivVideosTabHeading").click()):a("#ivImagesTabHeading").click());l=P.getImmersiveViewModalInstance();if(b.isDefined(l))l.show();else{f=a("#auiImmersiveViewDiv");var l=Math.min(Math.max(a(q).height()-150,540),1080),n=Math.min(Math.max(a(q).width()-75,990),1980),l=v.create(f,{name:"immersiveView",activate:"onclick",width:n,height:l,
popoverLabel:"ImmersiveView",hideHeader:!0});P.setImmersiveViewModalInstance(l);f.click()}H&&(H=!1,c(),h.trigger("dp:image-block:immersive-view:init"))}else q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else m.postCountMetric("immersiveViewNotExistsClickCount")}var u,I,P,A,H=!0,L=0,K,v;y.when("a-modal").execute(function(a){v=a});var c=h.once(function(){h.on("a:popover:afterUpdatePosition:immersiveView",
f);h.on("a:popover:afterShow:immersiveView",f);h.on("a:popover:afterHide:immersiveView",w)}),E=h.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(c){var f=b.filter(".iv-active");f.attr("id")!==a(this).attr("id")&&h.trigger("dp:ivTabs:"+f.find("a").attr("data-iv-tab-view")+":deselect",c);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();f=a(this).find("a").attr("data-iv-tab-view");a("#"+f).show();
"ivVideosTab"===f&&(c.clickTimeStamp=K||c.timeStamp);h.trigger("dp:ivTabs:"+f+":select",c);m.postCountMetric("dppc_"+f);return!1})});return function(a,c,f,k){u=this;I=a;P=c;p.refToModel=P;A=k;u.render=function(a,b,c,f,d,e){m.postCountMetric("dpcc_altThumbs_"+b);H=!0};u.update=function(a){};u.getTitle=function(){};u.getVariationSelectionInfo=function(){};E();b.isImmersiveViewEnabled(I,P.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");A.register("imageClick",C);A.register("button360Click",
C);b.useTabbedImmersiveView(I)&&A.register("videoIngressClick",C)}});"use strict";y.when("A").register("ImageBlockLoader",function(h){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;h.ajax(a,b)}}});"use strict";y.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(h,a,b,m,p,k,B,f){function w(a){return null!==a&&"undefined"!==typeof a}function C(d){var e=0;a.each(d,function(a,d){var b=parseInt(d[1],
10);b>e&&(e=b)});return e}function u(d){var e=0;a.each(d,function(a,d){var b=parseInt(d[0],10);b>e&&(e=b)});return e}function I(a,e,b){e=e.width();if(b.naturalMainImageSize)return e;a=C(a);0<a&&(e=Math.min(e,a));return e}function y(a,e,b){e=e.height();if(b.naturalMainImageSize)return e;a=u(a);0<a&&(e=Math.min(e,a));return e}function A(d){var e;a.each(d,function(a,d){w(e)||(e=d[1]/d[0])});return e||1}function H(a,e,b){e.fadeTo(500,0,function(){K(a,b);e.fadeTo(500,1)})}function L(a){a&&a.toggle()}function K(d,
e){var b=e.find("img");w(b[d])&&a(b[d]).click()}function v(a,e){O[a]=e?e:O[a];return O[a]}function c(d,e,b){b=b||t;b=b.colorImages;if(1>b.length||!w(b[d])||!w(e))return-1;var c=-1;a.each(b[d],function(a,d){d.variant===e&&(c=a)});return c}function E(d,e,b){b=b||t;b=b.colorImages;return!(w(b)&&w(b[d])&&w(b[d][e])&&w(b[d][e].main))||1>a.map(b[d][e].main,function(a,d){return d}).length?-1:b[d][e]}function D(a,e,b,c){c.parent().css("z-index",2);0!==b&&0!==e&&(e/=b,a>e?c.css("width",e/a*100+"%"):c.css("height",
a/e*100+"%"))}function l(d,e){var b;if(b=d.useIV)b=d.colorImages&&d.colorImages[e]&&0<d.colorImages[e].length?!0:!1;B.isEnabled&&(B.IVApplicaple=b,f.logImmersiveViewApplicability(a,B));return b}function n(a){return a.playVideoInImmersiveView&&"false"!==a.playVideoInImmersiveView}var x,G,M,t=a.extend(!0,{},p,k),O={};return{isDefined:w,isDefinedAndEmpty:function(a){return w(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return w(a)?"object"===typeof a&&0===Object.keys(a).length:
!0},isDefinedAndNotEmpty:function(a){return w(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:A,getMaxHeightOfMainImage:y,getMaxWidthOfMainImage:I,getMaxDimensionsOfMainImage:function(a,e,b){if(b.acEnabled)return[e.height(),e.width()];var c=y(a,e,b);e=I(a,e,b);a=A(a);b=e/a;e=Math.min(e,c*a);c=Math.min(c,b);return[c,e]},getContainerHeight:function(a,e,b){var c=a.get(0);a=0;if(w(c)){a=c.offsetWidth/e;a=Math.min(a,b);var f;e=t.mainImageHeightPartitions;
b=t.mainImageMaxSizes;if(w(b)&&w(e)){for(var k=0,l=q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=0;c<e.length;c++)l>e[c]&&(k=c+1);b.length>=k&&(f=b[k])}w(f)&&(a=Math.min(f[1],a))}return a},getColorFromState:function(d,e){if(d){e=e||t;var b="";a.each(e.visualDimensions,function(a,e){d[e]&&(b+=" "+d[e])});return b&&b.substring(1)}},createThumbnail:function(a,e,b,c){var f=b.find(".template").clone().removeClass("template").addClass("item"),k=document.createElement("img");
k.src=e;f.find(".placeHolder").replaceWith(k);(e=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===e&&f.addClass("heroImageThumbnail");w(c)&&f.addClass(c);h.declarative.create(f,"thumb-action",a);f.attr&&f.attr("data-ux-click","");b.append(f)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(d,e,c,f,
k,l,n,h){var z=a.extend({},c.foresterMetadataParams);null!==f&&(z.method+="."+f);var E=[];e.disabledViewIds&&(E=e.disabledViewIds);return b.embed({parentElement:d[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:c.swfUrl,foresterMetadataParams:z,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},videoAds:c.videoAds,bindings:{play:function(){"ImmersiveView"===
f?x||(x=!0,m.postCountMetric("dppc_chromefulVideoPlayedIV")):G||(G=!0,m.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,d,b){k&&(H(0,l,h),L(n))}}],disabledViewIds:E})},loadMediaIntoAiry:function(a,b,c,f){a&&a.getMediaSourceInfo()!==b.url&&(f?(M={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(M)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||
"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(d){d&&(a("#imageBlock .unvailableVariation").html(d),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:H,toggleVideoCaption:L,selectThumbnail:K,spinner:function(d,b){var c=a("#imageBlock .a-spinner").parent();0===c.length&&(c=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),
d.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));b?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:v,getIndexForVariant:c,getImageHash:E,lazyLoadingRequired:function(a,b,g){b=Math.max(c(a.color,
b.getCurrentItem().variant,g),0);b=-1!==E(a.color,b,g);a=g.colorToAsin[a.color]&&g.colorToAsin[a.color].asin;a=!a||"success"!==v(a);return!g.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:D,repositionVideoBanner:function(a,b,c,f){setTimeout(function(){var c=a.width()/a.height();D(c,16,9,b)},f||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:
0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!w(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return w(a)&&w(a[b])&&w(a[b].url)?a[b]:-1},isImmersiveViewEnabled:l,playVideoInImmersiveView:function(a,b){return l(a,b)&&n(a)},useTabbedImmersiveView:n,getMediaSourceInfo:function(){return w(M)?M.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){b=a.colorToAsin[b]&&a.colorToAsin[b].asin;b=w(b)?b:a.mediaAsin;return{pageContext:{page:"DetailPageTablet",placement:"ImageBlock",
marketplaceID:c.marketPlaceID,locale:c.languageCode,requestId:a.requestId,product:{contentID:b,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:"ASIN",imageURL:c.slateUrl,videoURL:c.url}},configuration:{id:"div-light-player",type:"lightplayer",binder:"lightplayer",assets:["VSECommonComponentAssets","Brila"],features:{features:{placementcontext:"vse_ib_tablet_web"}}}}},addTag:function(a){q.ue&&q.ue.tag&&q.ue.tag(a)}}});"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",
function(h,a,b,m){function p(c,f,k,n){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var h=H.getCurrentItem();if(!n||"chromeless-video"!==h.type||!A.autoplayVideo){n=0;if("hero-image"===h.type){n=B(h.color,h.variant);if(-1===n)return;n=-1!==n?n:0}var p=f+n;p>=k&&(n=0,p=f);f=m.getHeroImageHash(A,h.color,n);-1!==f&&(L.dispatch("updateModel",{data:{index:n,thumbnailIndex:p,variant:f.variant,type:"hero-image"}}),f=c.find(".item").get(p),b.selectGivenThumbnail(a(f),c))}}}function k(c,f,k){if("hero-video"===
H.getCurrentItem().type)return c;f=A.heroImage&&A.heroImage[f];var h=c;b.isDefined(f)&&(a.each(f,function(a,f){c<A.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:c,variant:f.variant},f.thumb,K,"imageThumbnail"),c++)}),p(K,h,c,k));return c}function B(c,f){var k=A.heroImage;if(1>k.length||!b.isDefined(k[c])||!b.isDefined(f))return-1;var h=-1;a.each(k[c],function(a,b){b.variant===f&&(h=a)});return h}function f(){if(v.length&&A.repositionHeroImage){var a=m.getHeroDimParams(A,H.getCurrentItem()),
c;b.isDefined(a)&&(c=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",v.css({"background-position":c,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function w(a,c,f,k){if(v.length&&a&&c){if("function"===typeof f||k){var h=new Image;h.onload=k?function(){v.css("background-image",'url("'+a+'")')}:f;h.src=a}f=c[1];var h=c[0],B;k||v.css({"background-image":'url("'+a+'")'});A.repositionHeroImage&&(c=
m.getHeroDimParams(A,H.getCurrentItem(),c),b.isDefined(c)&&(f=c.width,h=c.height,B=b.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px "));v.css({"background-position":B,"background-size":f+"px "+h+"px ","max-width":f+"px ","min-height":h+"px ",filter:"","-ms-filter":""})}}function C(b,c,f,k){b=m.getHeroImageHash(A,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];w(c,b.main[c],f,k)}function u(a,b,c){if("hero-image"!==a.type)return-1;var f=B(a.color,H.getCurrentItem().variant),
f=-1!==f?f:0;if(-1===m.getHeroImageHash(A,a.color,f))return-1;var k=H.getCurrentItem();a.thumbnailIndex=k.thumbnailIndex;a.type=k.type;a.variant=k.variant;a.index=f;q(a,b,c)}function q(a,b,f){var k=m.getHeroImageHash(A,a.color,a.index),B;B=a&&c&&h.equals(a,c)?!0:!1;c||(c=a);if(!B&&a||b)C(a.color,a.index,b,f),c=a;v.removeClass("hide-background");h.trigger("dp:image-block:update",k)}var y,A,H,L,K,v,c={};return function(c,h,l,n){y=this;A=c;H=h;L=n;A.heroImage[A.landingAsinColor]=A.heroImage[A.defaultColor];
y.render=function(b,c,f,h,l,d,e){K=h;v=a("#heroImage");b=k(c,b,d);u(H.getCurrentItem(),e,d);return b};y.update=function(a){var c=a.data;"ingress"!==c.type&&v.addClass("hide-background");"swatchHover"===a.type?a.captured||(c.type=H.getCurrentItem().type,-1!==u(c)&&(a.captured=!0)):"hero-image"===c.type&&(q(c),"click"!==a.type&&A.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,K))};L.register("resize",f)}});"use strict";y.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",
function(h,a,b){var m,p,k,B;return function(a,w,C,q){m=this;p=a;k=q;m.render=function(a,f,k,w,C,q,v){B=w;m=this;k=p.maxAlts;w=f;C=p.colorImages[a]?p.colorImages[a].length:0;C+=b.getVideosCount(a,p);a=p.heroImage[a];q=0;a&&(q=a.length);a=C+q;a>k&&(k=a-k,a=B.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),k+="+",w={type:"ingress",index:0,thumbnailIndex:f,variant:""},a.find("#altIngressText").append(k),h.declarative.create(a,"thumb-action",
w),B.append(a),w=f++);return w};m.update=function(a){"ingress"===a.data.type&&"click"===a.type&&k.dispatch("imageClick",a)}}});"use strict";y.when("imageBlockUtils").register("ImageBlockState",function(h){return function(a,b,m){this.getImageHash=function(b){var k=m.getCurrentItem();b=h.getIndexForVariant(k.color,b||"MAIN",a);return h.getImageHash(k.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});
"use strict";y.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(h,a){function b(a,b){var f;if(b.repositionHeroImage){f=a[1];var h=a[0];if(768>=(q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))f*=.7,h*=.7;else{var m=((q.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,m=Math.max(Math.min(m,1),0);f*=.7+.3*m;h*=.7+.3*m}f=[f,h]}return f}function m(b,h,f){var m;if(f.repositionHeroImage){var p=q.innerWidth||
document.documentElement.clientWidth||document.body.clientWidth;f=f.heroFocalPoint;if(a.isDefined(f)){m=Math.max((p-Math.min(1500,b))/2,0);var u=Math.max((p-b)/2,0);m-=u;p=Math.max(Math.min(p,1500),1024);m=m+(p-420-23)/2-b/h[1]*f}}return m}function p(b,m,f){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[m])&&a.isDefined(b[m][f])&&a.isDefined(b[m][f].main))||1>h.map(b[m][f].main,function(a,b){return b}).length?-1:b[m][f]}return{getHeroImageHash:p,getHeroDimParams:function(k,B,f){if(k.repositionHeroImage){if(!a.isDefined(f)){f=
p(k,B.color,B.index);if(-1===f)return;B=h.map(f.main,function(a,b){return b})[0];f=f.main[B]}B=b(f,k);k=m(B[0],f,k);return{height:B[1],width:B[0],xPos:k,yPos:75}}}}});"use strict";y.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(h,a,b){function m(a,m){var f=h.copy(a);if(b.isDefined(a)&&a.length>m){try{for(var p=-1,q=0;q<a.length;q++){var u=a.charAt(q);if(" "===u||"."===u||"?"===u||";"===u||","===u||":"===u)p=q;if(q===m-4){f=a.substring(0,-1===p?q:p);break}}}catch(y){f=
a.substring(0,m-3)}f+="..."}return f}function p(a,b){var f=a.lastIndexOf(".");return a="_"===a.charAt(f-1)?a.substring(0,f-1)+b+a.substring(f):a.substring(0,f)+"."+b+a.substring(f)}return{getDimension:function(a,b){var f=parseInt(a.css(b),10);return isNaN(f)?0:f},attachTabSelectHandler:function(a,b){h.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){h.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){h.on("dp:image-block:immersive-view:resize",a)},
detachImmersiveViewResizeHandler:function(a){h.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){h.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:p,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,
"");var f="_AA50_";b&&(f+="FMpng_RI_");return p(a,f)},populateVariationSelection:function(k){if(b.isDefined(q.DetailPage)&&b.isDefined(q.DetailPage.StateController)){k.empty();var h=q.DetailPage.StateController.getState(),f=h.variation_label_order,m;for(m in f)if(f.hasOwnProperty(m)){var p=f[m],u=h.selected_variations[p],p=h.variation_display_labels[p];u&&a("\x3cdiv/\x3e").addClass("ivVariations").text(p+":"+u).appendTo(k)}}},populateTitle:function(a,b,f){a.html(f.title);a.attr("title",a.text());
a.html(m(f.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,f,h){q.ueLogError&&q.ueLogError(h,{logLevel:a,attribution:b,message:f})}}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(h,a,b,m,p){function k(){p.populateTitle(l.find("#ivTitle"),160,E)}function q(){var a=D.getCurrentItem().color;x=E.colorImages[a];
n=E.heroImage[a];G=M=0;b.isDefined(n)&&(G=n.length);b.isDefined(x)&&(M=x.length)}function f(a){return a.hiRes||a.large||a.main[a.main.length-1]}function w(){var a=l.find("#ivStage").find("#ivLargeImage"),b=a.width(),d=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var f=c.width(),h=c.height();0<c.length&&(c[0].naturalWidth&&(f=c[0].naturalWidth),c[0].naturalHeight&&(h=c[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,h=0===h?1:h,k=Math.min(b/f,d/h),n=h*k,m=f*k;1>k?(O?a.css("cursor",
"url('"+E.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),g=!0):g=!1;f=Math.min(m,f);h=Math.min(n-20,h);c.css({"margin-top":(d-h)/2,"margin-left":(b-f)/2,height:h,width:f});a.css("visibility","visible");e=!1}function C(a){var b=l.find("#ivLargeImage");b.css("visibility","hidden");b.empty();p.animateStageIn(b);b.append(a);w()}function u(d){l.find("#ivLargeImage").css("display","none");l.find("#ivLargeImage").css("display",
"block");var c;"hero-image"===d?b.isDefined(n)&&(c=f(n[t.index])):b.isDefined(x)&&(c=f(x[t.index]));if(b.isDefined(c)){l.find(".fullscreen").remove();var e=a("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),g=l.find("#ivLargeImage");p.animateStageOut(g,function(){e.load(function(){C(e)});if(e[0].complete)C(e);else{g.empty();var b=(g.height()-104)/2,d=(g.width()-80)/2;a("\x3cimg\x3e").attr("src",E.staticImages.spinner).css({position:"relative",top:b+"px",left:d+"px"}).appendTo(g)}})}}function y(a){l.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivHeroImage")?t.type="hero-image":t.type="image";t.index=a.attr("id").split("_")[1];u(t.type);m.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(t.index,10)+1)+"_"+(G+M))}function P(){l.delegate(".ivThumb","click",function(){var b=a(this);y(b)})}function A(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function H(a){var b=Q.top-(a.pageY-U[1])*T;a=A(Q.left-(a.pageX-U[0])*T,J.left);b=A(b,J.top);l.find(".fullscreen").css({left:a,top:b})}function L(){l.delegate("#ivLargeImage",
"click",function(a){if(e)w();else if(g){l.find(".fullscreen").removeAttr("style");if(g){var b=l.find("#ivLargeImage"),d=b.find(".fullscreen");O?b.css("cursor","url('"+E.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));e=!0;var c=l.find("#ivLargeImage");J.left=c.width()-d.width();J.top=c.height()-d.height();var c=b.height()/2,f=b.width()/2;U=[b.offset().left+f,b.offset().top+c];Q.top=c-d.height()/2;Q.left=f-d.width()/2;
d.css({position:"relative",left:Q.left,top:Q.top});T=Math.max(d.height()/b.height(),d.width()/b.width())}H(a);m.postCountMetric("dpcc_iv_largeImageCLick")}});l.delegate("#ivLargeImage","mousemove",function(a){e&&H(a)})}function K(){l.find("#ivLargeImage").empty()}function v(c){if(d){l=a("#ivMain");q();t=D.getCurrentItem();k();p.populateVariationSelection(l.find("#ivVariationSelection"));c=l.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=G+M,f=0,g=0;f<e;)for(var h=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),
m=0;4>m&&f<e;m++,f++,g++)if(g<G){var v=n[f].thumb,E=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+f).appendTo(h);E.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(v)+'") center no-repeat')}else g>=G&&g<M+G&&(v=x[f-G].thumb,E=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-G)).appendTo(h),E.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(v)+
'") center no-repeat'));R();d=!1}else k();c=a("#ivImagesTab").height();l.css("height",c);e=l.find("#ivTitle").outerHeight(!0);f=l.find("#ivVariationSelection").outerHeight(!0);g=l.find("#ivThumbs");h=p.getDimension(g,"margin-top")+p.getDimension(g,"margin-bottom");g.css("height",c-e-f-h);l.find("#ivLargeImage").css("height",c);c=l.find("#ivStage");e=l[0]&&l[0].getBoundingClientRect&&Math.floor(l[0].getBoundingClientRect().width)||l.width();c.css("width",e-p.getDimension(l,"padding-left")-p.getDimension(l,
"padding-right")-l.find("#ivThumbColumn").width()-p.getDimension(c,"margin-left")-p.getDimension(c,"margin-right"));t=D.getCurrentItem();c="hero-image"===t.type?l.find("#ivHeroImage_"+t.index):"image"===t.type?l.find("#ivImage_"+t.index):b.isDefined(n)?l.find("#ivHeroImage_"+t.index):l.find("#ivImage_"+t.index);b.isjQueryObjDefined(c)||(c=l.find("#ivImage_0"));y(c)}var c,E,D,l,n,x,G,M,t,O=navigator.userAgent.match(/msie|trident/i),d=!0,e=!1,g=!1,J={},Q={},T,U,d=!0,R=h.once(function(){P();L();p.attachImmersiveViewResizeHandler(v);
p.attachTabDeselectHandler("ivImagesTab",K)});return function(b,e,f,g){c=this;E=b;D=e;c.render=function(b,c,e,f,g,h){d=!0;q();0===G+M?p.hideTabHeading("ivImagesTabHeading"):p.unhideTabHeading("ivImagesTabHeading");1===G+M?a("#ivThumbs").hide():a("#ivThumbs").show()};c.update=function(a){};p.attachTabSelectHandler("ivImagesTab",v)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",
function(h,a,b,m,p,k,B){function f(){E.delegate(".ivThumb","click",function(){var b=a(this);E.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")&&(D.type="chromeful-video",D.index=b.attr("id").split("_")[1])})}function w(){var b=a("#ivVideosTab").height();E.css("height",b);var c=E.find(".vse-video-block");n=b-p.getDimension(E,"padding-top")-p.getDimension(E,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(d)E.css({"max-width":Math.floor(1.77*n)});
else{var b=E.find(".vse-airy-container"),c=E.find(".vse-ib-metadata"),f=Math.floor(n-p.getDimension(c,"height")),g=Math.floor(1.77*f);b.css({"max-height":f,"max-width":g});c.css("max-width",g);e&&(b=E.find(".vse-vertical-scroll"),c=p.getDimension(b,"margin-top")+p.getDimension(b,"margin-bottom"),b.css("max-height",n-c))}}function C(){u();l&&l.pause();g=!1;t=!0;M=null}function u(){g=!1;l&&l.pause()}function y(b){M=b.clickTimeStamp;O&&(B.get(h,"#ivVideoBlock",c,U,R),E=a("#ivVideoBlock"),v.getCurrentItem(),
D=v.getCurrentItem(),J());w();g=!0;O=!1;H()}function P(b){O&&(E=a("#ivVideoBlock"),v.getCurrentItem(),D=v.getCurrentItem(),J());g&&H();w()}function A(a){l=a.airy;g&&l.play({isAsync:!0})}function H(){if(l&&(l.play({isAsync:!0,eventTimestamp:M||(new Date).getTime()}),m.postCountMetric("dpcc_vse_videoBlock_video_played"),t)){var a=q.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,m.postTimeMetric("dpcc_vse_vitff",a),t=!1)}}var L,K,v,c,E,D,l,n,x,G,M,t=!0,O=!0,d=!1,e=!1,g=!1,J=
h.once(function(){f();p.attachImmersiveViewResizeHandler(P);p.attachTabDeselectHandler("ivVideosTab",u);p.attachImmersiveViewResetHandler(C)}),Q=function(c,e,f){a("#ivVideoBlockSpinner").addClass("aok-hidden");m.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+e.placement);c=v.getCurrentItem().color;c=b.getVideoHash(c,0,K);l||(l=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),c,K.airyConfig,"ImmersiveView"));d=!0;a("#ivVideoBlock").css({"max-width":1.77*n,margin:"0 auto"});g&&d&&l.play({isAsync:!0})},
T=function(b,d,e){O||B.get(b,"#ivVideoBlock",c,U,R);a("#ivVideoBlockSpinner").addClass("aok-hidden")},U=function(a,b,c){e=!0;w();g&&H()},R=function(a,b,c){m.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,d,e,f){L=this;K=a;v=d;L.render=function(a,d,e,f,g,l){a=v.getCurrentItem().color;d=b.getVideoHash(a,0,K);x=K.colorToAsin[a]&&K.colorToAsin[a].asin;x=b.isDefined(x)?x:K.mediaAsin;G=null!==K.vseVideoDataSourceTreatment&&"T1"===
K.vseVideoDataSourceTreatment?"ASIN":"physicalID";O=!0;-1===d?p.hideTabHeading("ivVideosTabHeading"):(p.unhideTabHeading("ivVideosTabHeading"),c={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:d.marketPlaceID,locale:d.languageCode,product:{contentID:x,contentIDType:"ASIN"},video:{contentID:d.mediaObjectId,contentIDType:G,videoURL:d.url,imageURL:d.slateUrl},requestId:K.dpRequestId,metadata:{ProductTitle:K.title}},k.get(h,"#ivVideoBlock",c,T,Q))};L.update=function(a){};p.attachTabSelectHandler("ivVideosTab",
y);h.on("vseAiry",A)}});"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(h,a,b,m,p,k,q){function f(){var b=a("#iv360Tab").height();g.css("height",b);var d=g.find("#ivTitle360").outerHeight(!0),c=g.find("#ivVariationSelection360").outerHeight(!0),e=g.find("#ivThumbs360"),f=q.getDimension(e,"margin-top")+q.getDimension(e,"margin-bottom");e.css("height",b-d-c-f);b=g.find("#ivStage360");
d=g[0]&&g[0].getBoundingClientRect&&Math.floor(g[0].getBoundingClientRect().width)||g.width();b.css("width",d-q.getDimension(g,"padding-left")-q.getDimension(g,"padding-right")-g.find("#ivThumbColumn360").width()-q.getDimension(b,"margin-left")-q.getDimension(b,"margin-right"))}function w(){P();var a=g.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});q.animateStageIn(a)},200);y()}function y(){if(0<V){var a=g.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function u(b,c){if(V<b.length){var e=a("\x3cimg /\x3e").css({display:"block",width:6*Q+"px",height:T+"px"});e.hide();c.append(e);e.get(0).onload=function(){c.closest(document.documentElement).length&&(V++,1===V&&(y(),0<ma&&(p.time("dppc_loadTime360",Date.now()-ma,d.mediaAsin),k.postTimeMetric("dppc_loadTime360",Date.now()-ma))),0<ea&&(p.time("dppc_perSpriteloadTime360",Date.now()-ea,d.mediaAsin),k.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ea)),g.find("#iv360Spinner").hide(),e.show(),
ga=5*J.imageLocations[Math.floor(ha/J.imageLocations[0].length)][ha%J.imageLocations[0].length],u(b,c))};e.attr("src",b[V].replace(/(\._SP)\d+(,)\d+/,"$1"+R+"$2"+U));ea=Date.now()}}function I(a){if(b.isDefined(J.spriteWidthSizes)&&0<J.spriteWidthSizes.length){var d=J.spriteWidthSizes,c=d.length,e=d[0],f=d[c-1];if(a<=e)return e;if(a>f)return f;for(e=0;e<c;e++)if(a>d[e]&&a<=d[e+1])return d[e+1]}else return a}function P(){var b=g.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),
b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",d.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Z=!0,A())}function A(){if(b.isDefined(J.spriteURLs)&&b.isDefined(g)&&Z&&!fa){var e=g.find("#ivLarge360"),
f=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(J.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",J.staticImages.hint360).appendTo(f);a("\x3cdiv\x3e").css({"text-align":"center"}).text(d.staticStrings.dragToSpin).appendTo(f);f.appendTo(e);var f=J.imageWidth,h=J.imageHeight,k=e.parent().width(),l=e.parent().height(),n=0,m=0;f/h>k/l?(R=I(k),U=Math.round(h/
f*R),Q=Math.ceil(k),T=Math.ceil(U/R*k),m=(l-T)/2):(U=I(l),R=Math.round(f/h*U),T=Math.ceil(l),Q=Math.ceil(R/U*l),n=(k-Q)/2);e.css({"margin-left":n,"margin-top":m,width:Q+"px",height:T+"px",overflow:"hidden",position:"relative"});e.children("#image-360-sprites").css("width",6*Q+"px");u(J.spriteURLs,g.find("#image-360-sprites"),0);f=g.find("#ivLarge360");f.bind("mousedown",v);f.bind("touchstart",H);f.bind("touchmove",L);f.bind("touchend",K);a(document).bind("mousemove",c);a(document).bind("mouseup",
E);b.isDefined(d.staticImages.grab)&&e.css("cursor","url('"+d.staticImages.grab+"'), auto");fa=!0}}function H(a){F=!0;ba=a.originalEvent.targetTouches[0].clientX}function L(a){F&&(D(a.originalEvent.targetTouches[0].clientX-ba),ba=a.originalEvent.targetTouches[0].clientX)}function K(a){F&&(F=!1)}function v(a){da=!0;z=a.originalEvent.clientX;b.isDefined(d.staticImages.grabbing)&&(a=g.find("#ivLarge360"),a.css("cursor","url('"+d.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+d.staticImages.grabbing+"'), auto"));return!1}function c(a){da&&(D(a.originalEvent.clientX-z),z=a.originalEvent.clientX)}function E(a){da&&(da=!1,b.isDefined(d.staticImages.grab)&&(a=g.find("#ivLarge360"),a.css("cursor","url('"+d.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function D(a){ga-=a/Q*180;W&&(p.count("dppc_360dragToSpin",d.mediaAsin),k.postCountMetric("dppc_360dragToSpin"));W=!1;for(a=ga;0>a;)a+=360;for(;360<a;)a-=360;ga=a;var c;a=360;
for(var e=0;e<V;e++)for(var f=0;f<J.imageLocations[e].length;f++){var h=Math.abs(ga-5*J.imageLocations[e][f]);h<a&&(a=h,c=e*J.imageLocations[0].length+f)}c!==ha&&(a=Math.floor(c/J.imageLocations[0].length),a!==Math.floor(ha/J.imageLocations[0].length)&&(b.isDefined(ja)||(ja=document.createElement("canvas").getContext("2d")),e=g.find("#image-360-sprites").children(),ja.drawImage(e[a],0,0)),a=g.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},
750)));ha=c;a=c%J.imageLocations[0].length*-1*Q;c=-1*Math.floor(c/J.imageLocations[0].length)*T;e=g.find("#ivLarge360").children("#image-360-sprites");e.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");e.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function l(){if(ca){g=a("#ivMain360");var b=e.getCurrentItem().color;G()&&M(b);J=G()?d.spin360ColorData[b]:void 0;q.populateTitle(g.find("#ivTitle360"),160,d);q.populateVariationSelection(g.find("#ivVariationSelection360"));g.find("#ivLarge360").empty();
V=0;fa=Z=!1;ha=ga=0;ka();ca=!1}0!==a("#iv360Tab").height()&&(q.detachImmersiveViewResizeHandler(l),f(),w(),ma=Date.now(),r=W=!0,p.count("dppc_click360",d.mediaAsin),k.postCountMetric("dppc_click360"))}function n(c,f,g){var h=d.colorToAsin[g],l={},n=500;if(!h||!h.asin)if(g===d.defaultColor)h={asin:d.winningAsin};else return;l.params={asin:h.asin};var v="360"+h.asin,r=Date.now();l.success=function(h){p.time("dppc_asyncRequestTime360",Date.now()-r,d.mediaAsin);k.postTimeMetric("dppc_asyncRequestTime360",
Date.now()-r);if(h&&b.isDefined(h.spin360)){if(h=h.spin360.spin360Model)d.spin360ColorData[g]=h,g===e.getCurrentItem().color&&(J=d.spin360ColorData[g],A(),a("#ivThumbs360").hide(),q.unhideTabHeading("iv360TabHeading"),x(c,f,g));b.ajaxState(v,"success")}else l.error()};l.error=function(){p.count("dppc_asyncFailedTransient360",d.mediaAsin);k.postCountMetric("dppc_asyncFailedTransient360");p.time("dppc_asyncRequestTime360",Date.now()-r,d.mediaAsin);k.postTimeMetric("dppc_asyncRequestTime360",Date.now()-
r);n*=2;16E3>=n?setTimeout(function(){r=Date.now();m.load("/gp/product/features/apparel-main-image/360.html",l)},n):(p.count("dppc_asyncFailed360",d.mediaAsin),k.postCountMetric("dppc_asyncFailed360"),b.ajaxState(v,"fail"))};b.ajaxState(v)&&"fail"!==b.ajaxState(v)||(m.load("/gp/product/features/apparel-main-image/360.html",l),b.ajaxState(v,"sent"))}function x(a,c,f){if(b.isImmersiveViewEnabled(d,e.getCurrentItem().color)&&G()&&M(f)){if(c===d.maxAlts){f=a.find(".item.imageThumbnail");var g=a.find(".item.videoThumbnail");
b.isDefined(g)&&1<g.length?g.last().remove():f.last().remove();c--}f=a.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item");h.declarative.create(f,"button-360-click");a.append(f);c++;p.count("dppc_display360",d.mediaAsin);k.postCountMetric("dppc_display360")}return c}function G(){return d&&b.isDefined(d.spin360ConfigEnabled)&&d.spin360ConfigEnabled}function M(a){return b.isDefinedAndNotEmpty(d.spin360ColorData[a])?!0:b.isDefined(d.spin360LazyLoadEnabled)&&
d.spin360LazyLoadEnabled}function t(){r&&(p.time("dppc_duration360",Date.now()-ma,d.mediaAsin),k.postTimeMetric("dppc_duration360",Date.now()-ma),r=!1)}var O,d,e,g,J,Q,T,U,R,z,ba,Z=!1,fa=!1,ga=0,ha=0,ma=0,ea=0,da=!1,F=!1,V=0,ja,W=!0,r=!1,ca=!0,ka=h.once(function(){q.attachImmersiveViewResizeHandler(l);q.attachImmersiveViewResizeHandler(f);q.attachImmersiveViewResetHandler(t);q.attachTabDeselectHandler("iv360Tab",t)});return function(c,f,g,h){O=this;d=c;e=f;c=d.landingAsinColor;f=d.defaultColor;b.isDefined(d.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",q.addStyleCodeToURL(d.staticImages.icon360,"_FMpng_RI_"));G()&&(d.spin360ColorData||(d.spin360ColorData={}),c===f&&b.isDefinedAndEmpty(d.spin360ColorData[f])&&delete d.spin360ColorData[f]);O.render=function(c,e,f,g,h,k){ca=!0;G()&&M(c)?(f=d.spin360ColorData[c],b.isDefinedAndEmpty(f)?q.hideTabHeading("iv360TabHeading"):b.isDefinedAndNotEmpty(f)?(a("#ivThumbs360").hide(),q.unhideTabHeading("iv360TabHeading"),x(g,e,c)):
(d.spin360ColorData[c]={},q.hideTabHeading("iv360TabHeading"),n(g,e,c))):q.hideTabHeading("iv360TabHeading")};O.update=function(a){};q.attachTabSelectHandler("iv360Tab",l)}});y.register("nexusLogger360",function(){return{count:function(h,a){q.ue&&q.ue.event({asin:a,metricName:h,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(h,a,b){q.ue&&q.ue.event({asin:b,metricName:h,metricValue:a},"hit-360","hit360.clientEvent.3")}}});"use strict";y.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",
function(h,a){try{var b=q.location.host,m={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},p=b.split(".")[1],k=-1===b.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==m[p]?m[p]:"https://www.amazon.com/vap/ew/",B="vse_lazyLoaderHook:success:",f="vse_lazyLoaderHook:error:",w="vse_preLoaderHook:success:",C="vse_preLoaderHook:error:",u="vse_lightPlayerLoaderHook:success:",I="vse_lightPlayerLoaderHook:error:",P=4E3,A=3}catch(H){a.logError("FATAL","vse_ns_desktop","[Domain] ",
H)}y.register("vse_ns_preLoaderHook",function(){function b(f,m){try{var c=f.A,q=f.block,p=f.request,l=f.handleFailure,n=f.handleSuccess,x=c.$;m--;var u=A-m-1,y=c.now();c.ajax(k+"componentbuilder",{params:p,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:p.timeout||P,withCredentials:!0,success:function(a){var b=c.now()-y;h.postTimeMetric(w,b);h.postCountMetric(w+p.page+":"+p.placement+":"+u);x(q).html(a);n(c,p,a)},error:function(a){h.postCountMetric(C+p.page+
":"+p.placement+":"+u);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<m?b(f,m):(h.postCountMetric(C,1),l(c,p,a))}})}catch(t){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",t)}}return{get:function(a,f,c,h,k){b({A:a,block:f,request:c,handleFailure:k,handleSuccess:h},A)}}});y.register("vse_ns_lazyLoaderHook",function(){function b(m,p,c){try{var q=m.A,u=m.context,l=m.handleFailure,n=m.handleSuccess;p.attr("data-configuration");var x=atob(p.attr("data-configuration")),w=
JSON.parse(x),y={pageContext:u,configuration:w},t=q.now();c--;var C=A-c-1;q.ajax(k+"subcomponent/"+w.type,{params:y,paramsFormat:"json",method:"post",contentType:"application/json",timeout:u.timeout||P,withCredentials:!0,success:function(a){var b=q.now()-t;h.postTimeMetric(B,b);h.postCountMetric(B+u.page+":"+u.placement+":"+w.type+":"+C);p.html(a);n(q,y,a)},error:function(a){h.postCountMetric(f+u.page+":"+u.placement+":"+w.type+":"+C);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<
c?b(m,p,c):(h.postCountMetric(f,1),l(q,y,a))}})}catch(d){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",d)}}return{get:function(a,f,c,h,k){var l=a.$;l(f+" div[data-configuration]").each(function(){b({A:a,context:c,handleFailure:k,handleSuccess:h},l(this),A)})}}});y.register("vse_ns_videoPlayer",function(){function b(f,m,c){try{var p=f.A,q=f.block,l=f.request,n=f.handleFailure,w=f.handleSuccess,y=p.$;c--;var B=A-c-1,t=p.now();p.ajax(k+"subcomponent/lightvideoplayer",{params:l,paramsFormat:"json",
crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||P,withCredentials:!0,success:function(a){var b=p.now()-t;h.postTimeMetric(u,b);h.postCountMetric(u+l.page+":"+l.placement+":"+B);y(q).html(a);w(p,l,a)},error:function(a){h.postCountMetric(I+l.page+":"+l.placement+":"+B);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<c?b(f,c):(h.postCountMetric(I,1),n(p,l,a))}})}catch(C){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",C)}}return{get:function(a,
f,c,h,k){b({A:a,block:f,request:c,handleFailure:k,handleSuccess:h},A)}}})})});