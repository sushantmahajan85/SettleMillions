<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/fdec90a950.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/sass/css/style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Raleway"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/vendor/tagify-master/dist/tagify.css" />
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script> -->

    <title>Document</title>

    <style>
      /* .tag-container {
        border: 2px solid #ccc;
        border-radius: 3px;
        background: #fff;
        display: flex;
        flex-wrap: wrap;
        align-content: flex-start;
        padding: 6px;
        overflow-x: scroll;
      }

      .deleteTag {
        margin-left: 1rem;
      }

      .tag-container .tag {
        height: 30px;
        margin: 5px;
        padding: 5px 6px;
        border: 1px solid #ccc;
        border-radius: 3px;
        background: #eee;
        display: flex;
        align-items: center;
        color: #333;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.2), inset 0 1px 1px #fff;
        cursor: default;
      }
      .tag i {
        font-size: 16px;
        color: #666;
        margin-left: 0.8rem;
      }
      .tag-container input {
        padding: 5px;
        font-size: 16px;
        border: 0;
        outline: none;
        font-family: "Rubik";
        color: #333;
        flex: 1;
      } */

      /* /////////////////////////////////////////////////////////////////////////////////////////////////*/

      /* * {
        box-sizing: border-box;
      } */

      /* body {
        background-color: #f1f1f1;
      } */

      /* .form_container {
        background-color: #ffffff;
        margin: 100px auto;
        font-family: Raleway;
        padding: 40px;
        width: 70%;
        min-width: 300px;
      }
      .form_container h1 {
        text-align: center;
      }
      .form_container textarea {
        padding: 10px;
        width: 100%;
        font-size: 17px;
        font-family: Raleway;
        border: 1px solid #aaaaaa;
      }
      .form_container select {
        padding: 10px;
        width: 100%;
        font-size: 17px;
        font-family: Raleway;
        border: 1px solid #aaaaaa;
      }
      .form_container input {
        padding: 10px;
        width: 100%;
        font-size: 17px;
        font-family: Raleway;
        border: 1px solid #aaaaaa;
      } */

      /* Mark input boxes that gets an error on validation: */
      input.invalid {
        background-color: #ffdddd;
      }

      /* Hide all steps by default: */
      /* .tab {
        display: none;
      } */

      /* .new_deal_button {
        background-color: #4caf50;
        color: #ffffff;
        border: none;
        padding: 10px 20px;
        font-size: 17px;
        font-family: Raleway;
        cursor: pointer;
      }

      .new_deal_button:hover {
        opacity: 0.8;
      } */

      /* #prevBtnNewDeal {
        background-color: #bbbbbb;
      } */

      /* Make circles that indicate the steps of the form: */
      /* .step {
        height: 15px;
        width: 15px;
        margin: 0 2px;
        background-color: #bbbbbb;
        border: none;
        border-radius: 50%;
        display: inline-block;
        opacity: 0.5;
      } */

      /* .step.active {
        opacity: 1;
      } */

      /* Mark the steps that are finished and valid: */
      /* .step.finish {
        background-color: #4caf50;
      } */
    </style>
  </head>
  <body>
   
    <%- include('partials/navbar.ejs') %>

    <!-- <section class="header" style="z-index:10;width:100% !important">
      <a href="/">
        <div class="title">
          <h2 class="Navb_logo-text">Your Deal</h2>
        </div>
      </a>
  
  
      <div class="search_nv">
      <form action="/" method="GET" class="search" id="searchx">
        
        <input type="text" name="search" id="search" placeholder="Search for awesome deals" class="search__input" />
  
        <button class="search__button">
          <i class="fas fa-search search-icon"></i>
        </button>
        <select class="categories_dropdown_nv">
          <option value="0">Categories</option>
          <option value="1">Category 01</option>
          <option value="1">Category 02</option>
        </select>
      </form>
    </div>
      <nav class="user-nav">
  
  
        <% if(user){ %>
        <a  class="titles_nv" href="/newDeal">
          <div class="postDeal" style="display: flex; align-items: center; ">
  
  
            <div > <i class="far fa-plus-square"></i>Post</div>
          </div>
        </a>
        <% }else{ %>
        <a  class="titles_nv" href="#" id="like_deal_no">
          <div class="postDeal" style="display: flex; align-items: center; ">
  
           
            <div> <i class="far fa-plus-square"></i>Post</div>
          </div>
        </a>
        <% } %>
        <div class="titles_nv">
          <div ><i class="fas fa-heart"></i>Wishlist</div>
        </div>
        
        <% if (user) { %>
        <a  class="titles_nv" href="" id="logout">
          <div class="postDeal" style="display: flex; align-items: center; ">
            
            <i class="fas fa-sign-out-alt"></i>
            <div >Logout</div>
          </div>
        </a>
        <% } else { %>
         
        <a class="titles_nv" href=<%=` /signup `%> id="signup">
          <div class="postDeal" style="display: flex; align-items: center; ">
            
            <div ><i class="fas fa-user-plus"></i>Sign-up</div>
          </div>
        </a>
     
  
        <a class="titles_nv" href=<%= `/login` %> id="login">
          <div class="postDeal" style="display: flex; align-items: center; ">
            
            <div><i class="fas fa-user-shield"></i>Login</div>
          </div>
        </a>
      
        <% } %>
        <% if (user) { %>

  
        <% } %>
        
        
        <% if (user) { %> <% if (user.photo) { %>
        <div class="user-nav__user">
          <nav role="navigation">
            <ul>
              <li><a href=<%= `/member/${user.id}` %>><img src=<%=`/img/users/${user.photo}` %> alt="User photo"
                    class="user-nav__user-photo" /></a>
                <ul class="dropdown" style="background-color: black;">
                  <li><a href="#">Sub-1</a></li>
                  <li><a href="#">Sub-2</a></li>
                  <li><a href="#">Sub-3</a></li>
                </ul>
              </nav>
                 <% } else { %><nav role="navigation">
                  <ul>
                    <li><a href=<%= `/member/${user.id}` %> ><img
                      data-name=<%=user.name %> data-color="#85e0ce" class="profile
                      user-nav__user-photo"/></a>
                      <ul class="dropdown" style="background-color: black;">
                        <li><a href="#">Sub-1</a></li>
                        <li><a href="#">Sub-2</a></li>
                        <li><a href="#">Sub-3</a></li>
                      </ul>
                    </li>
                  </ul>
                </nav> <% } %> <% } %> 
          </div>
  
  
  
      </nav>
    </section> -->
    <script src="/vendor/initial.min.js"></script>
    <script>
      $(".profile").initial();
    </script>
    <script src="/js/logout.js"></script>
    <!-- <script src="/vendor/jquery.bootcomplete.js"></script>
  
      <script>
        (function($) {
          $(function() {
            $("#search").bootcomplete({
              url: "/search",
              method: "get",
            });
          });
        })(jQuery);
      </script> -->
    <!-- <script>
        $(function() {
          $("#search").autocomplete({
            source: function(req, res) {
              $.ajax({
                url: "/search",
                dataType: "json",
                type: "GET",
                data: req,
                success: function(data) {
                  console.log(data);
                },
                error: function(err) {
                  console.log(err.status);
                },
              });
            },
            minLength: 1,
            select: function(event, ui) {
              if (ui.item) {
                $("#search").text(ui.item.label);
              }
            },
          });
        });
      </script> -->
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script>
      $(function () {
        $("#search").autocomplete({
          source: function (request, response) {
            $.ajax({
              url: "/search",
              type: "GET",
              data: request, // request is the value of search input
              success: function (data) {
                // Map response values to fiedl label and value
                response(
                  $.map(data, function (el) {
                    return {
                      label: el.dealName,
                      value: el._id,
                    };
                  })
                );
              },
            });
          },
  
          // The minimum number of characters a user must type before a search is performed.
          minLength: 2,
  
          // set an onFocus event to show the result on input field when result is focused
          focus: function (event, ui) {
            this.value = ui.item.label;
            // Prevent other event from not being execute
            event.preventDefault();
          },
          select: function (event, ui) {
            // Prevent value from being put in the input:
            this.value = ui.item.label;
            // Set the id to the next input hidden field
            $(this)
              .next("input")
              .val(ui.item.value);
            // Prevent other event from not being execute
            event.preventDefault();
            // optionnal: submit the form after field has been filled up
            $("#searchx").submit();
          },
        });
      });
    </script>
  
  
    <div class="popup" id="popupLike">
      <!-- <div class="bg-video">
        <video  class="bg-video_content" autoplay loop muted>
            <source src="sass/img/coverr-philippines-spices-1559212666899.mp4" type="video/mp4">
        </video>
    </div> -->
      <div class="popup_content">
  
  
        <div class="popup_left"><img src="/images/32-kjb-1409-dnft-gry-killer-original-imafz9xjgkhguknc.jpeg" alt="hi"
            class="popup_img">
          <!-- <img src="/images/32-kjb-1409-dnft-gry-killer-original-imafz9xjgkhguknc.jpeg" alt="hi" class="popup_img"> -->
        </div>
        <div class="popup_right">
          <div class="popup_cross" id="popup_crosslike">&times;</div>
          <h1 class="heading-secondary popup_heading center">about us</h1>
          <p class="paragraph popup_paragraph">Thapar Food Festival is the most magnificent and awe-inspiring festivity
            ever happened, one-of-a-kind. Keeping the sky as the limit, we always venture hard to content the ever-growing
            foodie in you. TFF is not just a festival, but also a mission to let food break barriers and make everyone
            happy on a common stage. We are a journey, ever-growing indulging masses in merry-making. Come, experience
            edible infinity.</p>
  
        </div>
  
        <button id="like_btn_deal">Signup/Login</button>
      </div>
    </div>
  
    <script>
  
      document.getElementById("like_deal_no").addEventListener("click", (e) => {
        e.preventDefault();
  
        document.getElementById('popupLike').style.display = 'block';
      });
  
    </script>
    <script>
  
        // document.getElementById("like_deal").addEventListener("click", (e) => {
        //   e.preventDefault();
  
        //   location.assign("/newDeal");
        // });
  
    </script>
    <script>
  
      document.getElementById("popup_crosslike").addEventListener("click", (e) => {
        e.preventDefault();
  
        document.getElementById('popupLike').style.display = 'none';
      });
  
    </script>
    <script>
  
      document.getElementById("like_btn_deal").addEventListener("click", (e) => {
        e.preventDefault();
  
        document.getElementById('popupLike').style.display = 'none';
        location.assign('/signup');
      });
  
    </script>

    <div class="form_box">
      <div class="form_container">
        <form id="regForm">
          <h1 class="Post-box-title">Post a Deal</h1>

          <div class="tab">
            <p class="tab_headings">Essentials:</p>
            <p>
              <input
                placeholder="Deal Name...(Required)"
                oninput="this.className = ''"
                id="dealName"
                name="dealName"
                class="needed"
              />
            </p>
            <p>
              <input
                placeholder="Link...(Required)"
                oninput="this.className = ''"
                id="link"
                name="link"
                class="needed"
              />
            </p>
            <p>
              <input
                placeholder="MRP...(Required)"
                oninput="this.className = ''"
                id="dealPrice"
                name="dealPrice"
                class="needed"
              />
            </p>
            <p>
              <input
                placeholder="Offer Price...(Required)"
                oninput="this.className = ''"
                id="mrp"
                name="mrp"
                class="needed"
              />
            </p>
            <p>
              <select name="hhhh" id="company" oninput="this.className = ''">
                <option value="">Amazon</option>
              </select>
            </p>
          </div>
          <div class="tab">
            <p>
              <input
                placeholder="Brand Name"
                oninput="this.className = ''"
                id="brand"
                name="brand"
              />
            </p>
            <p class="tab_headings">Category:</p>
            <p>
              <select
                id="category"
                size="1"
                oninput="this.className = ''"
                class="needed"
                onchange="makeSubmenu(this.value)"
              >
                <option value="" disabled selected
                  >Choose Category (Required)</option
                >
                <option value="electronics">Electronics</option>
                <option value="menFashion">Men's Fashion</option>
                <option value="womenFashion">Women's Fashion</option>
                <option value="homeKitchen">Home and Kitchen</option>
                <option value="beauty">Beauty</option>
                <option value="personalCare">Personal Care</option>
              </select>
            </p>
            <p>
              <select
                id="categorySelect"
                size="1"
                oninput="this.className = ''"
              >
                <option value="" disabled selected>Choose Subcategory</option>
                <option></option>
              </select>
            </p>
            <p>
              <label for="photos">
                <p class="tab_headings">Choose new photo:</p>
              </label>
              <input
                type="file"
                accept="image/*"
                class="title_img"
                id="photos"
                name="titleImg"
              />
            </p>
            <p id="caru">
              <label for="corousel">
                <p class="tab_headings">new photo:</p>
              </label>
              <input
                type="file"
                accept="image/*"
                id="corousel1"
                name="corouselImgs"
              />
              <input
                type="file"
                accept="image/*"
                id="corousel2"
                name="corouselImgs"
              />
            </p>
          </div>
          <div class="tab">
           <span class="post-page3-element1">Description:</span> 
            <p>
              <textarea
                cols="30"
                rows="10"
                id="biggerDis"
                placeholder="Product Details..."
                oninput="this.className = ''"
                name="pword"
              ></textarea>
            </p>
            <p>
              <input
                placeholder="Tags..."
                type="text"
                class="tagi"
                oninput="this.className = ''"
                name="tagtagtag"
                id="tags"
              />
            </p>
          </div>
          <div style="overflow: auto;">
            <div class="two_box_1" style="float: right;">
              <button
                type="button"
                id="prevBtnNewDeal"
                class="new_deal_button"
                onclick="nextPrev(-1)"
              >
                Previous
              </button>
              <button
                type="button"
                id="nextBtnNewDeal"
                class="new_deal_button"
                onclick="nextPrev(1)"
              >
                Next
              </button>
              <button
                type="submit"
                style="display: none;"
                id="submitBtn"
                class="new_deal_button"
                onclick="nextPrev(1)"
              >
                Submit
              </button>
            </div>
          </div>
          <!-- Circles which indicates the steps of the form: -->
          <div style="text-align: center; margin-top: 2rem;">
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
          </div>
        </form>
      </div>
    </div>

    <div class="footer">
      <div class="footer-content">
          <div class="footer-section about">
              <h2>About</h2>
              <br>
              <ul>
                  <a href="#">
                      <li>About Us</li>
                  </a>
                  <a href="#">
                      <li>Contact Us</li>
                  </a>
                  <a href="#">
                      <li>Careers</li>
                  </a>
                  <a href="#">
                      <li>Our Team</li>
                  </a>

              </ul>
          </div>
          <div class="footer-section social">
              <h2>Social</h2>
              <br>
              <ul>
                  <a href="https://twitter.com/">
                      <li><i class="fab fa-twitter"></i>Twitter</li>
                  </a>
                  <a href="https://www.facebook.com/">
                      <li><i class="fab fa-facebook-f"></i>Facebook</li>
                  </a>
                  <a href="https://twitter.com/">
                      <li><i class="fab fa-instagram"></i>Instagram</li>
                  </a>
              </ul>
          </div>
          <div class="footer-section policy">
              <h2>Policy</h2>
              <br>
              <ul>
                  <a href="#">
                      <li>Terms and Conditions</li>
                  </a>
                  <a href="#">
                      <li>Privacy Policy</li>
                  </a>
              </ul>
          </div>
          <div class="footer-section help">
              <h2>Help</h2>
              <br>
              <ul>
                  <a href="#">
                      <li>How to Post a Deal</li>
                  </a>
                  <a href="#">
                      <li>FAQ</li>
                  </a>
                  <a href="#">
                      <li>Report</li>
                  </a>
              </ul>
          </div>
      </div>
      <div class="footer-bottom">
          <hr>
          </hr>
          &copy; 2020, Your Deal Inc.

      </div>
  </div>

    <script src="/vendor/tagify-master/dist/tagify.min.js"></script>
    <script>
      var input = document.querySelector(".tagi");
      var tagify = new Tagify(input, {
        whitelist: ["oCaml", "calm", "hey"],
        blacklist: ["c++"],
      });
    </script>

    <script type="text/javascript">
      var subcategory = {
        electronics: ["Arcade Equipment", "Audio", "Circuit Boards & Components", "Communications", "Computers", "Accessories", "Video"],
        menFashion: ["Baby & Toddler Clothing", "Pants", "Sleepwear & Loungewear", "Suits", "Ceremonial Clothing", "Underwear & Socks"],
        womenFashion: ["Baby & Toddler Clothing", "Pants", "Shirts & Tops", "Sleepwear & Loungewear", "Suits", "Ceremonial Clothing", "Underwear & Socks", "Dresses"],
        homeKitchen: ["Bathroom Accessories", "Business & Home Security", "Decor", "Household Appliance", "Cookware", "Food Storage", "Kitchen Appliance", "Kitchen Tools & Utensils"],
        beauty: ["Jewelry", "Nail Care", "Perfume & Cologne", "Skin Care", "Foot Care"],
        personalCare: ["Hair Care", "Massage & Relaxation", "Oral Care", "Shaving & Grooming", "Sleeping Aids"],
      };

      function makeSubmenu(value) {
        if (value.length == 0)
          document.getElementById("categorySelect").innerHTML =
            "<option></option>";
        else {
          var citiesOptions = "";
          for (categoryId in subcategory[value]) {
            citiesOptions +=
              "<option>" + subcategory[value][categoryId] + "</option>";
          }
          document.getElementById("categorySelect").innerHTML = citiesOptions;
        }
      }

      function displaySelected() {
        var country = document.getElementById("category").value;
        var city = document.getElementById("categorySelect").value;
        alert(country + "\n" + city);
      }

      function resetSelection() {
        document.getElementById("category").selectedIndex = 0;
        document.getElementById("categorySelect").selectedIndex = 0; 
      }
    </script>
    <script>
      var currentTab = 0; // Current tab is set to be the first tab (0)
      showTab(currentTab); // Display the current tab

      function showTab(n) {
        // This function will display the specified tab of the form...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        //... and fix the Previous/Next buttons:
        if (n == 0) {
          document.getElementById("prevBtnNewDeal").style.display = "none";
        } else {
          document.getElementById("prevBtnNewDeal").style.display = "inline";
        }
        if (n == x.length - 1) {
          document.getElementById("submitBtn").style.display = "inline";
          document.getElementById("nextBtnNewDeal").style.display = "none";
        } else {
          document.getElementById("submitBtn").style.display = "none";
          document.getElementById("nextBtnNewDeal").style.display = "inline";
        }
        //... and run a function that will display the correct step indicator:
        fixStepIndicator(n);
      }

      function nextPrev(n) {
        // console.log(validateForm());

        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;

        // Hide the current tab:
        x[currentTab].style.display = "none";
        // Increase or decrease the current tab by 1:
        currentTab = currentTab + n;
        // if you have reached the end of the form...
        if (currentTab >= x.length) {
          // ... the form gets submitted:
          // document.getElementById("regForm").submit((e) => {
          //   e.preventDefault();
          // });
          return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
      }

      function validateForm() {
        // This function deals with validation of the form fields
        var x,
          y,
          i,
          valid = true;

        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByClassName("needed");
        // console.log(y);
        // A loop that checks every input field in the current tab:
        for (i = 0; i < y.length; i++) {
          // If a field is empty...
          if (y[i].value == "") {
            // add an "invalid" class to the field:
            y[i].className += " invalid";
            // and set the current valid status to false
            valid = false;
          }
        }
        // If the valid status is true, mark the step as finished and valid:
        if (valid) {
          document.getElementsByClassName("step")[currentTab].className +=
            " finish";
        }
        return valid; // return the valid status
      }

      function fixStepIndicator(n) {
        // This function removes the "active" class of all steps...
        var i,
          x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
          x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class on the current step:
        x[n].className += " active";
      }
    </script>
    <script>
      var x = document.getElementsByClassName("tab");
      if (x.length > 1) {
      }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script src="js/newDeal.js"></script>
    <!-- 
    <script src="js/main.js"></script> -->
    <!-- 
    <script>
      // var tag = document.querySelector('input[name=tagtagtag]');
      // new Tagify(tag);
      const tagContainer = document.querySelector(".tag-container");
      const input = document.querySelector(".tag-container input");

      let tags = [];

      function createTag(label) {
        const div = document.createElement("div");
        div.setAttribute("class", "tag");
        const span = document.createElement("span");
        span.innerHTML = label;
        const closeIcon = document.createElement("i");
        closeIcon.setAttribute("class", "deleteTag");
        closeIcon.innerHTML = "x";
        // closeIcon.setAttribute('class', 'material-icons');
        closeIcon.setAttribute("data-item", label);
        div.appendChild(span);
        div.appendChild(closeIcon);
        return div;
      }

      function clearTags() {
        document.querySelectorAll(".tag").forEach((tag) => {
          tag.parentElement.removeChild(tag);
        });
      }

      function addTags() {
        clearTags();
        tags
          .slice()
          .reverse()
          .forEach((tag) => {
            tagContainer.prepend(createTag(tag));
          });
      }

      input.addEventListener("keyup", (e) => {
        if (e.key === "Enter") {
          e.target.value.split(",").forEach((tag) => {
            tags.push(tag);
          });

          addTags();
          input.value = "";
        }
      });
      document.addEventListener("click", (e) => {
        console.log(e.target.tagName);
        if (e.target.tagName === "I") {
          const tagLabel = e.target.getAttribute("data-item");
          const index = tags.indexOf(tagLabel);
          tags = [...tags.slice(0, index), ...tags.slice(index + 1)];
          addTags();
        }
      });

      input.focus();
    </script> -->

    <!-- <script>
      $("#caru").on("change", "input", function(event){
        $('#caru').append('<input type="file" id="corousel" name="corouselImgs[]"/>')
      });
  </script> -->
  </body>
</html>

<!-- <form id="postADeal">
      <label for="dealName">Deal Name:</label>
      <input type="text" name="dealName" id="dealName" />
      <br />
      <label for="affiliateLink">Affiliate Link:</label>
      <input type="text" name="affiliateLink" id="affiliateLink" />
      <br />
      <label for="category">Category:</label>
      <input type="text" name="category" id="category" />
      <br />
      <label for="company">Company:</label>
      <input type="text" name="company" id="company" />
      <br />
      <label for="mrp">MRP:</label>
      <input type="number" name="mrp" id="mrp" />
      <br />
      <label for="dealPrice">Deal Price:</label>
      <input type="number" name="dealPrice" id="dealPrice" />
      <br />
      <button class="postDeal" type="submit">
        Post Deal
      </button>
    </form> -->
